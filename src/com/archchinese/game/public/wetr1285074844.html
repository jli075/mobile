var Y=function(){var f;var g;var h={};h.runTimeCanvasWidth=function(){return f.sys.canvas.Width};h.runTimeCanvasHeight=function(){return f.sys.canvas.height};h.setMainGameScene=function(a){f=a};h.setGameOverScene=function(a){g=a};h.setGameVocabLists=function(a,b,c,d,e){f.setGameVocabLists(a,b,c,d,e)};h.setGameLeaderboard=function(a){g.setGameLeaderboard(a)};return h}();var Z=function(){var k='0',l='1',i='gameGlass',h='gameHelp',f='gameOptions',d='gameOver',g='gameScene1',e='gameTitle',m='wordEater_controlOn',j='wordEater_musicOn',n='wordeater';var c={};c.getGameOverId=function(){return d};c.getGameTitleId=function(){return e};c.getGameOptionsId=function(){return f};c.getGameSceneOneId=function(){return g};c.getGameHelpId=function(){return h};c.getGameGlassId=function(){return i};c.isMusicOn=function(){return fn_getLocal(j)!=k};c.setMusicOn=function(a){var b=a?l:k;fn_saveLocal(j,b)};c.isMobileControlOn=function(){return fn_getLocal(m)==l};c.setMobileControlOn=function(a){var b=a?l:k;fn_saveLocal(m,b)};c.getAsset=function(a){return fn_getAsset(n,a)};return c}();Z.gameTitle=function(){var l='Help',k='Options',j='Start',g='background.jpg',h='button-bg.png',i='pointerup';var c=fn_createScene(Z.getGameTitleId());function d(){c.scene.start(Z.getGameGlassId());c.scene.sleep(Z.getGameGlassId());c.scene.start(Z.getGameSceneOneId());c.scene.moveAbove(Z.getGameTitleId(),Z.getGameSceneOneId());c.scene.moveAbove(Z.getGameGlassId(),Z.getGameSceneOneId())}
function e(){c.scene.start(Z.getGameOptionsId());c.scene.stop(Z.getGameTitleId())}
function f(){c.scene.start(Z.getGameHelpId());c.scene.stop(Z.getGameTitleId())}
c.init=function(){this.backgroundImgId=fn_createId();this.btnBackgroundImgId=fn_createId()};c.preload=function(){var a=Z.getAsset(g);var b=fn_getUserBackgroundImageURL();if(b.length>0){this.load.image(this.backgroundImgId,b);this.userBackgroundImageUsed=true}else{this.load.image(this.backgroundImgId,a)}this.load.image(this.btnBackgroundImgId,Z.getAsset(h))};c.create=function(){Z.gameMaster.styleCanvas();var a=fn_setBackground(this,this.backgroundImgId);a.alpha=0.7;this.startBtnBg=this.add.sprite(100,200,this.btnBackgroundImgId).setScale(1.15).setInteractive({useHandCursor:true}).on(i,d);fn_centerObject(this,this.startBtnBg,1.5);fn_nestedInCenter(fn_createTitlePageBtn(this,j,d),this.startBtnBg);this.optionsBtnBg=this.add.sprite(100,200,this.btnBackgroundImgId).setScale(1.15).setInteractive({useHandCursor:true}).on(i,e);fn_centerObject(this,this.optionsBtnBg,0);fn_nestedInCenter(fn_createTitlePageBtn(this,k,e),this.optionsBtnBg);this.helpBtnBg=this.add.sprite(100,200,this.btnBackgroundImgId).setScale(1.15).setInteractive({useHandCursor:true}).on(i,f);fn_centerObject(this,this.helpBtnBg,-1.5);fn_nestedInCenter(fn_createTitlePageBtn(this,l,f),this.helpBtnBg);fn_initPinyinFont(this)};c.update=function(){};return c}();Z.gameHelp=function(){var i='#FFFF00',l='#FFFFFF',k='Design: Jario Technologies \nMusic: Tenderness from Bensound.com',n='Return',h="Welcome to Word Chomper!\n\nUse the arrow keys (or joystick if enabled) to control the chomper. Make sure the chomper bites the Chinese, English, or Pinyin matching it and avoids the incorrect matches or it'll be injured and lose a heart. You have a maximum of 3 hearts, but for each correct term you chomp, you'll regain a heart. The highest score wins!",e='background.jpg',f='button-bg.png',j='center',g='frame.png',m='pointerup';function c(){d.scene.stop(Z.getGameHelpId());d.scene.start(Z.getGameTitleId())}
var d=fn_createScene(Z.getGameHelpId());d.init=function(){this.backgroundImgId=fn_createId();this.btnBackgroundImgId=fn_createId();this.frameImgId=fn_createId()};d.preload=function(){var a=Z.getAsset(e);var b=fn_getUserBackgroundImageURL();if(b.length>0){this.load.image(this.backgroundImgId,b);this.userBackgroundImageUsed=true}else{this.load.image(this.backgroundImgId,a)}this.load.image(this.btnBackgroundImgId,Z.getAsset(f));this.load.image(this.frameImgId,Z.getAsset(g))};d.create=function(){Z.gameMaster.styleCanvas();var a=fn_setBackground(this,this.backgroundImgId);a.alpha=0.7;this.helpTextBg=this.add.sprite(100,200,this.frameImgId).setScale(1.25);fn_centerObject(this,this.helpTextBg,1.5);var b=h;this.helpText=this.add.text(400,100,b,{fontFamily:fn_getEnglishFont(),fontSize:36,color:i,align:j,wordWrap:{width:700,useAdvancedWrap:true}});fn_nestedInCenter(this.helpText,this.helpTextBg);this.creditText=this.add.text(400,100,k,{fontFamily:fn_getEnglishFont(),fontSize:16,color:l,align:j,wordWrap:{width:700,useAdvancedWrap:true}});fn_nestedInCenter(this.creditText,this.helpTextBg);this.creditText.y+=250;this.returnBtnBg=this.add.sprite(100,200,this.btnBackgroundImgId).setScale(1.25).setInteractive({useHandCursor:true}).on(m,c);fn_centerObject(this,this.returnBtnBg,-4);fn_nestedInCenter(fn_createTitlePageBtn(this,n,c),this.returnBtnBg)};d.update=function(){};return d}();Z.gameOptions=function(){var m='#FFFF00',k='Enable joystick for mobile devices',i='Enable sound',l='Return',e='background.jpg',f='button-bg.png',g='checkedCheckbox.png',n='left',j='pointerup',h='uncheckedCheckbox.png';function c(){d.scene.stop(Z.getGameOptionsId());d.scene.start(Z.getGameTitleId())}
var d=fn_createScene(Z.getGameOptionsId());d.init=function(){this.backgroundImgId=fn_createId();this.btnBackgroundImgId=fn_createId();this.checkedCheckboxId=fn_createId();this.uncheckedCheckboxId=fn_createId();this.musicOn=Z.isMusicOn();this.controlOn=Z.isMobileControlOn()};d.preload=function(){var a=Z.getAsset(e);var b=fn_getUserBackgroundImageURL();if(b.length>0){this.load.image(this.backgroundImgId,b);this.userBackgroundImageUsed=true}else{this.load.image(this.backgroundImgId,a)}this.load.image(this.btnBackgroundImgId,Z.getAsset(f));this.load.image(this.checkedCheckboxId,Z.getAsset(g));this.load.image(this.uncheckedCheckboxId,Z.getAsset(h))};d.create=function(){Z.gameMaster.styleCanvas();var a=fn_setBackground(this,this.backgroundImgId);a.alpha=0.7;this.musicButton=this.add.image(0,0,this.checkedCheckboxId);this.musicButtonText=this.createLabel(i);fn_centerObject(this,this.musicButton,0.5);this.musicButton.x=this.musicButton.x-(this.musicButton.getBounds().width+this.musicButtonText.getBounds().width)/2;this.musicButtonText.y=this.musicButton.y-this.musicButton.getBounds().height/2;this.musicButtonText.x=this.musicButton.x+this.musicButton.getBounds().width+3;this.musicButton.setInteractive({useHandCursor:true}).on(j,function(){this.musicOn=!this.musicOn;this.updateOptions()},this);this.controlButton=this.add.image(0,0,this.checkedCheckboxId);this.controlButtonText=this.createLabel(k);fn_centerObject(this,this.controlButton,-0.5);this.controlButton.x=this.musicButton.x;this.controlButtonText.y=this.controlButton.y-this.controlButton.getBounds().height/2;this.controlButtonText.x=this.controlButton.x+this.controlButton.getBounds().width+3;this.controlButton.setInteractive({useHandCursor:true}).on(j,function(){this.controlOn=!this.controlOn;this.updateOptions()},this);this.updateOptions();this.returnBtnBg=this.add.sprite(100,200,this.btnBackgroundImgId).setScale(1.15).setInteractive({useHandCursor:true}).on(j,c);fn_centerObject(this,this.returnBtnBg,-4);fn_nestedInCenter(fn_createTitlePageBtn(this,l,c),this.returnBtnBg)};d.createLabel=function(a){return this.add.text(0,0,a,{fontFamily:fn_getEnglishFont(),fontSize:32,color:m,align:n})}.bind(d);d.updateOptions=function(){if(this.musicOn){this.musicButton.setTexture(this.checkedCheckboxId)}else{this.musicButton.setTexture(this.uncheckedCheckboxId)}Z.setMusicOn(this.musicOn);this.musicButton.scale=1.8;if(this.controlOn){this.controlButton.setTexture(this.checkedCheckboxId)}else{this.controlButton.setTexture(this.uncheckedCheckboxId)}Z.setMobileControlOn(this.controlOn);this.controlButton.scale=1.8}.bind(d);d.update=function(){};return d}();Z.gameGlass=function(){var d='Resume',e='Stop',b='button-bg.png',c='pointerup';var a=fn_createScene(Z.getGameGlassId());a.init=function(){this.btnBackgroundImgId=fn_createId()};a.preload=function(){this.load.image(this.btnBackgroundImgId,Z.getAsset(b))};a.create=function(){this.resumeBtnBg=this.add.sprite(100,200,this.btnBackgroundImgId).setScale(0.5).setInteractive({useHandCursor:true}).on(c,this.resumeGame);this.resumeBtnBg.alpha=0.5;fn_centerObject(this,this.resumeBtnBg,-5);this.resumeBtnBg.x=this.sys.canvas.width-2*this.resumeBtnBg.getBounds().width-20+70;this.resumeBtn=fn_createBtn(this,d,24,this.resumeGame);this.resumeBtn.alpha=0.7;fn_nestedInCenter(this.resumeBtn,this.resumeBtnBg);this.stopBtnBg=this.add.sprite(100,200,this.btnBackgroundImgId).setScale(0.5).setInteractive({useHandCursor:true}).on(c,this.stopGame);this.stopBtnBg.alpha=0.5;fn_centerObject(this,this.stopBtnBg,-5);this.stopBtnBg.x=this.sys.canvas.width-this.stopBtnBg.getBounds().width-10+70;this.stopBtn=fn_createBtn(this,e,24,this.stopGame);this.stopBtn.alpha=0.7;fn_nestedInCenter(this.stopBtn,this.stopBtnBg)};a.resumeGame=function(){a.scene.sleep(Z.getGameGlassId());a.scene.resume(Z.getGameSceneOneId());a.scene.get(Z.getGameSceneOneId()).enablePauseBtn()}.bind(a);a.stopGame=function(){a.scene.stop(Z.getGameSceneOneId());a.scene.stop(Z.getGameGlassId());a.scene.start(Z.getGameOverId())}.bind(a);a.update=function(){};return a}();Z.gameScene1=function(){var y='',S='#00FF00',R='#ffffff',L='Created By: ',X='Elastic',H='Linear',N='Pause',I='Score: ',J='Score: 0',O='Stop',Q='Word Count: ',K='Word Count: 0',z='background.jpg',T='bite',A='button-bg.png',V='drag',W='dragend',U='dragstart',E='dying.mp3',G='heart.png',B='joystick.png',C='joystickthumb.png',D='pickup.mp3',M='pointerup',F='tenderness.mp3',P='~';var x=fn_createScene(Z.getGameSceneOneId());x.init=function(){this.backgroundImgId=fn_createId();this.btnBackgroundImgId=fn_createId();this.dynamicFramesId=fn_createId();this.pickupAudioId=fn_createId();this.dyingAudioId=fn_createId();this.musicId=fn_createId();this.heartId=fn_createId();this.life=[];this.isSoundOn=Z.isMusicOn();this.isMobile=fn_isMobile()||Z.isMobileControlOn();if(this.isMobile){this.joyStickBaseImgId=fn_createId();this.joyStickThumbImgId=fn_createId()}this.lastBatchAnchorRow=-1;this.wordPool=[];this.activeWords=[];this.matchedWords=[];this.promptBoxExpand=false;this.promptBoxScaleFactor=1;this.finalScore=0;this.score=0;this.eaterTouched=false;this.gameSpeed=-100;var a=parseInt(fn_getDifficultyLevel());switch(a){case 0:this.gameSpeed=-80;break;case 1:this.gameSpeed=-100;break;case 2:this.gameSpeed=-150;break;}this.currentMatchType=fn_getGameMatchType();this.promptChinese=y;this.promptPinyin=y};x.preload=function(){if(this.isMobile){fn_loadJoyStick(this)}var a=Z.getAsset(z);var b=fn_getUserBackgroundImageURL();if(b.length>0){this.load.image(this.backgroundImgId,b);this.userBackgroundImageUsed=true}else{this.load.image(this.backgroundImgId,a)}this.load.image(this.btnBackgroundImgId,this.getAsset(A));if(this.isMobile){this.load.image(this.joyStickBaseImgId,this.getAsset(B));this.load.image(this.joyStickThumbImgId,this.getAsset(C))}if(this.isSoundOn){this.loadMusic(this.pickupAudioId,D);this.loadMusic(this.dyingAudioId,E);this.loadMusic(this.musicId,F)}this.load.image(this.heartId,this.getAsset(G))};x.create=function(){fn_drawSandWave(this);fn_setToFullScreen(this);var a=this.add.image(fn_getCanvasWidth()/2,fn_getCanvasHeight()/2,this.backgroundImgId);a.setDisplaySize(this.sys.canvas.width,this.sys.canvas.height);a.alpha=0.5;this.cursors=this.input.keyboard.createCursorKeys();if(this.isSoundOn){this.pickupSound=this.sound.add(this.pickupAudioId);this.dyingSound=this.sound.add(this.dyingAudioId);this.music=fn_loopPlayMusic(this,this.musicId,fn_getBackgroundMusicVolume()*0.75)}this.setUpGameStatusLabels();this.liveWords=this.physics.add.group();fn_loadGameVocabListsByUUID();this.graphics=this.add.graphics(0,0);this.graphics.lineStyle(1,12155479,1);this.graphics.fillStyle(16776960,1);for(var b=0;b<3;b++){var c=this.add.image(16+32*b,56,this.heartId);c.setOrigin(0,0);this.life.push(c)}this.tweens.add({targets:this.life,alpha:1,scale:0.8,ease:H,duration:1000,yoyo:true,repeat:-1});if(this.isMobile){fn_createJoyStick(this,this.joyStickBaseImgId,this.joyStickThumbImgId)}};x.update=function(){if(!this.eater){return}var a=this.cursors.left.isDown;var b=this.cursors.right.isDown;var c=this.cursors.up.isDown;var d=this.cursors.down.isDown;if(this.isMobile){a=this.cursors.left.isDown||this.joystick.left;b=this.cursors.right.isDown||this.joystick.right;c=this.cursors.up.isDown||this.joystick.up;d=this.cursors.down.isDown||this.joystick.down}if(a||(b||(c||d))){this.eaterTouched=true}if(!this.eaterTouched){fn_rotateAroundDistance([this.eater],{x:fn_getCanvasWidth()/2,y:fn_getCanvasHeight()/2},0.02,fn_getCanvasHeight()/4)}var e=-1;var f=this.liveWords.getLength();for(var g=0;g<f;g++){var h=this.liveWords.getChildren()[g];if(h){if(h.x+h.getBounds().width/2>e){e=h.x+h.getBounds().width/2}if(h.x+h.getBounds().width/2<-1*fn_getCanvasWidth()){h.setVisible(false);this.liveWords.remove(h,false,false);fn_removeElement(this.activeWords,h)}}}if(e<fn_getCanvasWidth()*0.8){this.setUpAPipe()}var i=5;var j=this.eater.getBounds().width;var k=this.eater.getBounds().height;if(this.eater){if(a){this.eater.x-=i;if(this.eater.x<j*2+this.promptLabel.displayWidth){this.eater.x=j*2+this.promptLabel.displayWidth}}else if(b){this.eater.x+=i;if(this.eater.x>fn_getCanvasWidth()-j/2){this.eater.x=fn_getCanvasWidth()-j/2}}if(c){this.eater.y-=i;if(this.eater.y<k/2){this.eater.y=k/2}}else if(d){this.eater.y+=i;if(this.eater.y>fn_getCanvasHeight()-150){this.eater.y=fn_getCanvasHeight()-150}}}if(this.promptLabel){this.promptLabel.y=this.eater.y;this.promptLabel.x=this.eater.x-this.promptLabel.displayWidth-this.eater.displayWidth/2}this.graphics.clear();var l=this.eater.isTinted?0:fn_getGameTextColorInt();this.graphics.lineStyle(8,l,1);this.graphics.fillStyle(l,0.2);if(this.promptBoxExpand){this.promptBoxScaleFactor+=0.005}else{this.promptBoxScaleFactor-=0.005}var m=true;if(this.promptBoxScaleFactor<0.9){this.promptBoxScaleFactor=0.9;this.promptBoxExpand=true;m=true}else if(this.promptBoxScaleFactor>1.1){this.promptBoxScaleFactor=1.1;this.promptBoxExpand=false;m=false}var n=this.promptLabel.displayWidth*1.45*this.promptBoxScaleFactor;var o=this.promptLabel.displayHeight*1.45*this.promptBoxScaleFactor;if(o<k){o=k}var p=fn_createEllipse(this.promptLabel.x,this.promptLabel.y,n,o);this.graphics.fillEllipseShape(p);this.graphics.strokeEllipseShape(p,128);this.graphics.fillStyle(l,1);var q=20*this.promptBoxScaleFactor;var r=this.eater.x-this.eater.displayWidth/2-this.promptLabel.x-n/2;var s=fn_createEllipse(this.promptLabel.x+n/2+r/2,this.promptLabel.y,r,q);this.graphics.fillEllipseShape(s);this.graphics.strokeEllipseShape(s,32);this.graphics.lineStyle(1,l,1);var t=20+(1-this.promptBoxScaleFactor)*40;var u=0;if(m){u=6;m=false}var v=fn_createEllipse(this.promptLabel.x-n/2-t/2,this.promptLabel.y-u,t,t/2);this.graphics.fillEllipseShape(v);this.graphics.strokeEllipseShape(v,32);var w=fn_createEllipse(this.promptLabel.x-n/2-t/2,this.promptLabel.y+u,t,t/2);this.graphics.fillEllipseShape(w);this.graphics.strokeEllipseShape(w,32)};x.createFrontText=function(){var a=Math.floor(Math.random()*this.chineseArray.length);var b=this.chineseArray[a];var c=this.pinyinArray[a];var d=this.englishArray[a];return fn_createFrontText_generic(this,b,c,d,42,1.3,this.currentMatchType)}.bind(x);x.getAsset=function(a){return Z.getAsset(a)};x.loadMusic=function(a,b){this.load.audio(a,[this.getAsset(b)])}.bind(x);x.showScore=function(){if(this.score<0){this.score=0}this.scoreText.setText(I+this.score)}.bind(x);x.setUpGameStatusLabels=function(){this.scoreText=fn_createStatusLabel(this,16,16,J);this.titleText=fn_createStatusLabel(this,this.sys.canvas.width,16,y);this.wordCountText=fn_createStatusLabel(this,this.sys.canvas.width,56,K);this.creatorText=fn_createStatusLabel(this,this.sys.canvas.width,96,L);this.pauseBtnBg=this.add.sprite(100,200,this.btnBackgroundImgId).setScale(0.5).setInteractive({useHandCursor:true}).on(M,this.pauseGame);this.pauseBtnBg.alpha=0.5;fn_centerObject(this,this.pauseBtnBg,-5);this.pauseBtnBg.x=this.sys.canvas.width-2*this.pauseBtnBg.getBounds().width-20+70;this.pauseBtn=fn_createBtn(this,N,24,this.pauseGame);this.pauseBtn.alpha=0.7;fn_nestedInCenter(this.pauseBtn,this.pauseBtnBg);this.stopBtnBg=this.add.sprite(100,200,this.btnBackgroundImgId).setScale(0.5).setInteractive({useHandCursor:true}).on(M,this.navigateToGameOverScene);this.stopBtnBg.alpha=0.5;fn_centerObject(this,this.stopBtnBg,-5);this.stopBtnBg.x=this.sys.canvas.width-this.stopBtnBg.getBounds().width-10+70;this.stopBtn=fn_createBtn(this,O,24,this.navigateToGameOverScene);this.stopBtn.alpha=0.7;fn_nestedInCenter(this.stopBtn,this.stopBtnBg)}.bind(x);x.pauseGame=function(){x.scene.pause(Z.getGameSceneOneId());x.scene.wake(Z.getGameGlassId());x.scene.moveAbove(Z.getGameSceneOneId(),Z.getGameGlassId());if(this.isSoundOn){x.music.pause()}}.bind(x);x.enablePauseBtn=function(){x.pauseBtn.setText(N);fn_nestedInCenter(x.pauseBtn,x.pauseBtnBg);if(this.isSoundOn){x.music.resume()}};x.populateDataArray=function(){this.chineseArray=this.chineseArrayStr.split(P);this.pinyinArray=this.pinyinArrayStr.split(P);this.englishArray=this.englishArrayStr.split(P);this.imgURLArray=this.imgURLArrayStr.split(P)}.bind(x);x.setGameVocabLists=function(a,b,c,d,e){this.chineseArrayStr=b;this.pinyinArrayStr=c;this.englishArrayStr=d;this.imgURLArrayStr=e;this.populateDataArray();this.updateListName(a);this.wordCountText.setText(Q+this.chineseArray.length);this.wordCountText.x=this.sys.canvas.width-this.wordCountText.getBounds().width-20;this.bottomReservedHeight=fn_getCanvasHeight()*0.15;this.rowCount=6;this.colCount=8;this.unitHeight=(fn_getCanvasHeight()-this.bottomReservedHeight)/this.rowCount;this.unitWidth=fn_getCanvasWidth()/this.colCount;this.createWordPool();this.setUpAPipe();this.eater=this.createEater();this.physics.add.overlap(this.eater,this.activeWords,this.checkCorrect,null,this);this.promptNextWord()}.bind(x);x.refreshWordGrid=function(){this.unitHeight=(fn_getCanvasHeight()-this.bottomReservedHeight)/this.rowCount;this.unitWidth=fn_getCanvasWidth()/this.colCount}.bind(x);x.createEater=function(){var d=8;var e=8;var f=this.textures.createCanvas(this.dynamicFramesId,768,96);var g=48;var h=Math.PI/(4*e);var i=0;var j=0;var k=f.context;for(var l=1;l<=e;l++){k.save();k.moveTo(i+48,j+48);k.fillStyle=R;k.arc(i+48,j+48,g,(l-1)*h,Math.PI*2-(l-1)*h,false);k.fill();k.restore();k.save();k.fillStyle=S;k.moveTo(i+48+17,j+48-25);k.arc(i+48+17-l*1,j+48-25-l*1,g/4,0,Math.PI*2,true);k.fill();k.restore();k.save();k.fillStyle=fn_getGameTextColor();k.moveTo(i+48+17,j+48-25);k.arc(i+48+17-l*1+l*0.5,j+48-25-l*1,g/9,0,Math.PI*2,true);k.fill();k.restore();f.add(l,0,i,j,96,96);i+=96;if(l%d===0){i=0;j+=96}}f.refresh();this.anims.create({key:T,frames:this.anims.generateFrameNumbers(this.dynamicFramesId,{start:1,end:e}),frameRate:20,repeat:-1,yoyo:true});var m=this.physics.add.sprite(fn_getCanvasWidth()/2,fn_getCanvasHeight()/2,this.dynamicFramesId).play(T);m.setCollideWorldBounds(true);m.body.allowGravity=false;m.alpha=1;m.setInteractive({useHandCursor:true,draggable:true}).on(U,function(a,b,c){this.eaterTouched=true},this).on(V,function(a,b,c){m.setPosition(b,c)},this).on(W,function(a,b,c){},this);return m}.bind(x);x.createWordPool=function(){var a=this.chineseArray.length*2;if(a>100){a=100}if(a<50){a=50}for(var b=0;b<a;b++){var c=this.createFrontText();c.setBackgroundColor(null);c.setVisible(false);this.wordPool.push(c)}}.bind(x);x.setUpAPipe=function(){this.lastBatchAnchorRow+=1;var a=this.rowCount/2;var b=[];var c=Math.random()>0.8?true:false;var d=fn_rand(0,a);for(var e=0;e<a;e++){var f=this.wordPool[Math.floor(Math.random()*this.wordPool.length)];if(c&&e==d){for(var g=0;g<this.wordPool.length;g++){if(this.promptChinese==this.wordPool[g].chinese&&!this.liveWords.contains(this.wordPool[g])){f=this.wordPool[g];break}}}var h=0;while((b.indexOf(f.chinese)>=0||this.liveWords.contains(f))&&h<50){f=this.wordPool[Math.floor(Math.random()*this.wordPool.length)];h++}if(h==50){return}f.setVisible(true);this.liveWords.add(f);this.activeWords.push(f);var i=this.lastBatchAnchorRow+e*2<this.rowCount?this.lastBatchAnchorRow+e*2:(this.lastBatchAnchorRow+e*2)%this.rowCount;f.y=this.unitHeight*i+f.getBounds().height;f.y+=fn_rand(-2,2)*this.unitHeight*0.1;if(f.y+f.getBounds().height/2>fn_getCanvasHeight()-this.bottomReservedHeight){f.y-=f.getBounds().height/2}if(f.y-f.getBounds().height<10){f.y+=f.getBounds().height}var j=f.getBounds().width;f.x=fn_getCanvasWidth()+j/2+fn_rand(-2,2)*j*0.3;f.body.enable=true;f.body.setVelocityX(this.gameSpeed);f.body.allowGravity=false;b.push(f.chinese)}}.bind(x);x.promptNextWord=function(){var a=this.activeWords[Math.floor(Math.random()*this.activeWords.length)];var b=0;while(this.matchedWords.indexOf(a.chinese)>=0&&b<20){a=this.wordPool[Math.floor(Math.random()*this.wordPool.length)];b++}if(a.chinese==this.matchedWords[this.matchedWords.length-1]){a=this.wordPool[Math.floor(Math.random()*this.wordPool.length)]}this.promptChinese=a.chinese;this.promptPinyin=a.pinyin;var c=a.backText;if(c.input&&c.input.enabled){}else{c.setInteractive({useHandCursor:true}).on(M,function(){if(this.isSoundOn){fn_playWordSound(this.promptChinese,this.promptPinyin)}},this)}fn_centerObject(this,c,-3);c.setVisible(true);c.scale=0.1;c.alpha=0.1;this.tweens.add({targets:c,alpha:1,scale:1,duration:1000,yoyo:false,repeat:0,onComplete:function(){if(this.isSoundOn){fn_playWordSound(this.promptChinese,this.promptPinyin)}}.bind(this)});this.promptLabel=c}.bind(x);x.checkCorrect=function(a,b){if(!this.eaterTouched){return}var c=a.getBounds().width;var d=b.x<a.x+c/2&&b.x>=a.x+c/3;var e=Math.abs(b.y-a.y)<a.getBounds().height*0.5;if(!(d&&e)){if(Math.random()>0.5){this.tweens.add({targets:b,angle:fn_rand(-30,30),duration:500,ease:H,yoyo:true,repeat:0,onComplete:function(){b.angle=0}.bind(this)})}return}var f=b.chinese==this.promptChinese;if(f){if(this.isSoundOn){fn_playSound(this.pickupSound,fn_getBackgroundMusicVolume(),false)}fn_removeElement(this.activeWords,b);this.liveWords.remove(b,false,false);this.tweens.add({targets:b,angle:360,alpha:0,duration:1000,ease:X,yoyo:false,repeat:0,onComplete:function(){b.setVisible(false);b.alpha=1}.bind(this)});this.score+=15;this.showScore();if(this.score>200&&this.score<400){if(Math.random()>0.5){this.rowCount=6}else{this.rowCount=8}}else if(this.score>400&&this.score<600){this.rowCount=8}else if(this.score>600){this.rowCount=10}this.refreshWordGrid();this.matchedWords.push(this.promptChinese);if(this.matchedWords.length>24){this.matchedWords.shift()}this.promptChinese=y;this.promptPinyin=y;this.promptLabel.setVisible(false);var g=parseInt(fn_getDifficultyLevel());switch(g){case 0:this.gameSpeed-=2;break;case 1:this.gameSpeed-=4;break;case 2:this.gameSpeed-=6;break;}for(var h=0;h<this.life.length;h++){if(!this.life[h].visible){this.life[h].visible=true;a.clearTint();break}}this.promptNextWord()}else{fn_removeElement(this.activeWords,b);b.setVisible(false);this.liveWords.remove(b,false,false);a.setTint(16711680);if(this.isSoundOn){fn_playSound(this.dyingSound,fn_getBackgroundMusicVolume()*0.8,false)}for(var h=this.life.length-1;h>=0;h--){if(this.life[h].visible){this.life[h].visible=false;break}}var i=false;for(var j=0;j<this.life.length;j++){if(this.life[j].visible){i=true;break}}if(!i){this.time.delayedCall(1000,this.navigateToGameOverScene,[],this)}}}.bind(x);x.updateListName=function(a){this.titleText.setText(a);this.titleText.x=this.sys.canvas.width-this.titleText.getBounds().width-16;this.creatorText.setText(L+fn_getCreator());this.creatorText.x=this.sys.canvas.width-this.creatorText.getBounds().width-16}.bind(x);x.navigateToGameOverScene=function(){this.finalScore=this.score;if(this.isSoundOn){x.music.pause()}x.scene.stop(Z.getGameSceneOneId());x.scene.stop(Z.getGameGlassId());x.scene.start(Z.getGameOverId())}.bind(x);return x}();Z.gameOver=function(){var d='#000000',c='button-bg.png';var b=fn_createScene(Z.getGameOverId());b.init=function(){this.btnBackgroundImgId=fn_createId()};b.preload=function(){this.load.image(this.btnBackgroundImgId,Z.getAsset(c))};b.create=function(){fn_stopFullScreen(this);var a=fn_createId();fn_createGradient(this,a,d,d);fn_setBackground(this,a);fn_centerObject(this,fn_createGameOverLabel(this),3);fn_centerObject(this,fn_createFinalScoreLabel(this,Z.gameScene1.finalScore),2);fn_createPlayAgainBtn(this,this.btnBackgroundImgId);if(fn_isInternetExplorer()){}else{fn_loadGameLeaderboard()}};b.update=function(){};b.setGameLeaderboard=function(a){fn_showLeaderboard(this,a,Z.gameScene1.finalScore,document)}.bind(b);return b}();Z.gameMaster=function(){function b(){var a=fn_getConfig();a.scene.push(Z.gameTitle);a.scene.push(Z.gameHelp);a.scene.push(Z.gameOptions);a.scene.push(Z.gameGlass);a.scene.push(Z.gameScene1);a.scene.push(Z.gameOver);a.physics.arcade.gravity.y=0;return a}
Y.setMainGameScene(Z.gameScene1);Y.setGameOverScene(Z.gameOver);var c={};c.game=fn_createGame(b());fn_registerDataAgent(Y);c.styleCanvas=function(){fn_styleCanvas(this.game)};return c}();