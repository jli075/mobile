var W=function(){var f;var g;var h={};h.runTimeCanvasWidth=function(){return f.sys.canvas.Width};h.runTimeCanvasHeight=function(){return f.sys.canvas.height};h.setMainGameScene=function(a){f=a};h.setGameOverScene=function(a){g=a};h.setGameVocabLists=function(a,b,c,d,e){f.setGameVocabLists(a,b,c,d,e)};h.setGameLeaderboard=function(a){g.setGameLeaderboard(a)};return h}();var X=function(){var n='0',o='1',l='gameGlass',g='gameHelp',h='gameOptions',d='gameOver',f='gameScene1',e='gameTitle',p='wordHunter_controlOn',m='wordHunter_musicOn',q='wordhunter';var c={};c.getGameOverId=function(){return d};c.getGameTitleId=function(){return e};c.getGameSceneOneId=function(){return f};c.getGameHelpId=function(){return g};c.getGameOptionsId=function(){return h};c.getGameGlassId=function(){return l};c.isMusicOn=function(){return fn_getLocal(m)!=n};c.setMusicOn=function(a){var b=a?o:n;fn_saveLocal(m,b)};c.isMobileControlOn=function(){return fn_getLocal(p)==o};c.setMobileControlOn=function(a){var b=a?o:n;fn_saveLocal(p,b)};c.getAsset=function(a){return fn_getAsset(q,a)};return c}();X.gameTitle=function(){var p='',o='Help',n='Options',m='Start',g='background.png',h='button-bg.png',l='pointerup';var c=fn_createScene(X.getGameTitleId());c.init=function(){this.backgroundImgId=fn_createId();this.btnBackgroundImgId=fn_createId()};c.preload=function(){var a=X.getAsset(g);var b=fn_getUserBackgroundImageURL();if(b.length>0){this.load.image(this.backgroundImgId,b)}else{this.load.image(this.backgroundImgId,a)}this.load.image(this.btnBackgroundImgId,X.getAsset(h))};function d(){c.scene.start(X.getGameGlassId());c.scene.sleep(X.getGameGlassId());c.scene.start(X.getGameSceneOneId());c.scene.moveAbove(X.getGameTitleId(),X.getGameSceneOneId());c.scene.moveAbove(X.getGameGlassId(),X.getGameSceneOneId())}
c.centerButton=function(a,b){fn_nestedInCenter(a,c.add.zone(fn_getCanvasWidth()/2,fn_getCanvasHeight()/2-b*100,fn_getCanvasWidth(),fn_getCanvasHeight()))};c.centerButtonText=function(a,b){fn_nestedInCenter(a,b)};function e(){c.scene.start(X.getGameOptionsId());c.scene.stop(X.getGameTitleId())}
function f(){c.scene.start(X.getGameHelpId());c.scene.stop(X.getGameTitleId())}
;c.create=function(){X.gameMaster.styleCanvas();fn_setBackground(this,this.backgroundImgId);this.startBtnBg=this.add.sprite(100,200,this.btnBackgroundImgId).setScale(1.15).setInteractive({useHandCursor:true}).on(l,d);fn_centerObject(this,this.startBtnBg,1.5);fn_nestedInCenter(fn_createTitlePageBtn(this,m,d),this.startBtnBg);this.optionsBtnBg=this.add.sprite(100,200,this.btnBackgroundImgId).setScale(1.15).setInteractive({useHandCursor:true}).on(l,e);fn_centerObject(this,this.optionsBtnBg,0);fn_nestedInCenter(fn_createTitlePageBtn(this,n,e),this.optionsBtnBg);this.helpBtnBg=this.add.sprite(100,200,this.btnBackgroundImgId).setScale(1.15).setInteractive({useHandCursor:true}).on(l,f);fn_centerObject(this,this.helpBtnBg,-1.5);fn_nestedInCenter(fn_createTitlePageBtn(this,o,f),this.helpBtnBg);this.add.text(0,0,p,{fontFamily:fn_getPinyinFont(),fontSize:10})};c.update=function(){};return c}();X.gameHelp=function(){var l='#000000',h='Move the astronaut through each level using the arrow keys. Navigate around the platforms and collect the matching Chinese/English/Pinyin along the way, but watch out for asteroids! Use the arrow keys to jump and dodge past the asteroids as they fly by.',o='Return',e='background.png',f='button-bg.png',g='frame.png',m='left',n='pointerup';function c(){d.scene.stop(X.getGameHelpId());d.scene.start(X.getGameTitleId())}
var d=fn_createScene(X.getGameHelpId());d.init=function(){this.backgroundImgId=fn_createId();this.btnBackgroundImgId=fn_createId();this.frameImgId=fn_createId()};d.preload=function(){var a=X.getAsset(e);var b=fn_getUserBackgroundImageURL();if(b.length>0){this.load.image(this.backgroundImgId,b)}else{this.load.image(this.backgroundImgId,a)}this.load.image(this.btnBackgroundImgId,X.getAsset(f));this.load.image(this.frameImgId,X.getAsset(g))};d.create=function(){X.gameMaster.styleCanvas();fn_setBackground(this,this.backgroundImgId);this.helpTextBg=this.add.sprite(100,200,this.frameImgId).setScale(1.25);fn_nestedInCenter(this.helpTextBg,this.add.zone(fn_getCanvasWidth()/2,fn_getCanvasHeight()/2-1.5*100,fn_getCanvasWidth(),fn_getCanvasHeight()));var a=h;this.helpText=this.add.text(400,100,a,{fontFamily:fn_getEnglishFont(),fontSize:42,color:l,align:m,wordWrap:{width:700,useAdvancedWrap:true}});fn_nestedInCenter(this.helpText,this.helpTextBg);this.returnBtnBg=this.add.sprite(100,200,this.btnBackgroundImgId).setScale(1.25).setInteractive({useHandCursor:true}).on(n,c);fn_centerObject(this,this.returnBtnBg,-4);fn_nestedInCenter(fn_createTitlePageBtn(this,o,c),this.returnBtnBg)};d.update=function(){};return d}();X.gameOptions=function(){var p='#000000',m='Enable mobile controls',l='Enable sound',o='Return',e='background.png',f='button-bg.png',g='checkedCheckbox.png',q='left',n='pointerup',h='uncheckedCheckbox.png';function c(){d.scene.stop(X.getGameOptionsId());d.scene.start(X.getGameTitleId())}
var d=fn_createScene(X.getGameOptionsId());d.init=function(){this.backgroundImgId=fn_createId();this.btnBackgroundImgId=fn_createId();this.checkedCheckboxId=fn_createId();this.uncheckedCheckboxId=fn_createId();this.musicOn=X.isMusicOn();this.controlOn=X.isMobileControlOn()};d.preload=function(){var a=X.getAsset(e);var b=fn_getUserBackgroundImageURL();if(b.length>0){this.load.image(this.backgroundImgId,b)}else{this.load.image(this.backgroundImgId,a)}this.load.image(this.btnBackgroundImgId,X.getAsset(f));this.load.image(this.checkedCheckboxId,X.getAsset(g));this.load.image(this.uncheckedCheckboxId,X.getAsset(h))};d.create=function(){X.gameMaster.styleCanvas();fn_setBackground(this,this.backgroundImgId);this.musicButton=this.add.image(0,0,this.checkedCheckboxId);this.musicButtonText=this.createLabel(l);fn_centerObject(this,this.musicButton,0.5);this.musicButton.x=this.musicButton.x-(this.musicButton.getBounds().width+this.musicButtonText.getBounds().width)/2;this.musicButtonText.y=this.musicButton.y-this.musicButton.getBounds().height/2;this.musicButtonText.x=this.musicButton.x+this.musicButton.getBounds().width+3;this.controlButton=this.add.image(0,0,this.checkedCheckboxId);this.controlButtonText=this.createLabel(m);fn_centerObject(this,this.controlButton,-0.5);this.controlButton.x=this.musicButton.x;this.controlButtonText.y=this.controlButton.y-this.controlButton.getBounds().height/2;this.controlButtonText.x=this.controlButton.x+this.controlButton.getBounds().width+3;this.musicButton.setInteractive({useHandCursor:true}).on(n,function(){this.musicOn=!this.musicOn;this.updateOptions()},this);this.controlButton.setInteractive({useHandCursor:true}).on(n,function(){this.controlOn=!this.controlOn;this.updateOptions()},this);this.updateOptions();this.returnBtnBg=this.add.sprite(100,200,this.btnBackgroundImgId).setScale(1.15).setInteractive({useHandCursor:true}).on(n,c);fn_centerObject(this,this.returnBtnBg,-4);fn_nestedInCenter(fn_createTitlePageBtn(this,o,c),this.returnBtnBg)};d.createLabel=function(a){return this.add.text(0,0,a,{fontFamily:fn_getEnglishFont(),fontSize:32,color:p,align:q})}.bind(d);d.updateOptions=function(){if(this.musicOn){this.musicButton.setTexture(this.checkedCheckboxId)}else{this.musicButton.setTexture(this.uncheckedCheckboxId)}X.setMusicOn(this.musicOn);this.musicButton.scale=1.8;if(this.controlOn){this.controlButton.setTexture(this.checkedCheckboxId)}else{this.controlButton.setTexture(this.uncheckedCheckboxId)}X.setMobileControlOn(this.controlOn);this.controlButton.scale=1.8}.bind(d);d.update=function(){};return d}();X.gameGlass=function(){var d='Resume',e='Stop',b='button-bg.png',c='pointerup';var a=fn_createScene(X.getGameGlassId());a.init=function(){this.btnBackgroundImgId=fn_createId()};a.preload=function(){this.load.image(this.btnBackgroundImgId,X.getAsset(b))};a.create=function(){this.resumeBtnBg=this.add.sprite(100,200,this.btnBackgroundImgId).setScale(0.5).setInteractive({useHandCursor:true}).on(c,this.resumeGame);this.resumeBtnBg.alpha=0.5;fn_centerObject(this,this.resumeBtnBg,-5);this.resumeBtnBg.x-=this.resumeBtnBg.getBounds().width/2+10;this.resumeBtn=fn_createBtn(this,d,24,this.resumeGame);this.resumeBtn.alpha=0.7;fn_nestedInCenter(this.resumeBtn,this.resumeBtnBg);this.stopBtnBg=this.add.sprite(100,200,this.btnBackgroundImgId).setScale(0.5).setInteractive({useHandCursor:true}).on(c,this.stopGame);this.stopBtnBg.alpha=0.5;fn_centerObject(this,this.stopBtnBg,-5);this.stopBtnBg.x+=this.stopBtnBg.getBounds().width/2+10;this.stopBtn=fn_createBtn(this,e,24,this.stopGame);this.stopBtn.alpha=0.7;fn_nestedInCenter(this.stopBtn,this.stopBtnBg)};a.resumeGame=function(){a.scene.sleep(X.getGameGlassId());a.scene.resume(X.getGameSceneOneId());a.scene.get(X.getGameSceneOneId()).enablePauseBtn();a.scene.get(X.getGameSceneOneId()).resetCursors()}.bind(a);a.stopGame=function(){a.scene.stop(X.getGameSceneOneId());a.scene.stop(X.getGameGlassId());a.scene.start(X.getGameOverId())}.bind(a);a.update=function(){};return a}();X.gameScene1=function(){var L='',C=' ',E='#CCCCCC',N='24px',I='30px',O='Created By: ',T='Level: ',H='Level: 1',P='Pause',S='Score: ',K='Score: 0',Q='Stop',J='Time: ',V='Word Count: ',M='Word Count: 0',w='arrow.png',r='asteroid.png',x='background.png',D='bold',A='brick.png',q='button-bg.png',y='dude.png',s='explosion.mp3',t='pickup.mp3',z='platform.png',R='pointerdown',G='pointerout',F='pointerover',B='pointerup',v='rock.png',u='sci-fi.mp3',U='~';var p=fn_createScene(X.getGameSceneOneId());p.init=function(){this.btnBackgroundImgId=fn_createId();this.musicId=fn_createId();this.pickUpAudioId=fn_createId();this.explosionAudioId=fn_createId();this.rockId=fn_createId();this.leftBtnId=fn_createId();this.backgroundImgId=fn_createId();this.bombImgId=fn_createId();this.dudeImgId=fn_createId();this.platformImgId=fn_createId();this.brickImgId=fn_createId();this.spriteLeftId=fn_createId();this.spriteRightId=fn_createId();this.spriteTurnId=fn_createId();this.score=0;this.level=1;this.gameScene1Done=false;this.leftButtonDown=false;this.rightButtonDown=false;this.upButtonDown=false;this.currentMatchType=-1;this.showFrontSide=true;this.jumpable=false;this.isMobile=fn_isMobile()||X.isMobileControlOn();this.isMusicOn=X.isMusicOn();this.frontList=[];this.backList=[];this.totalTime=300};p.preload=function(){this.load.image(this.btnBackgroundImgId,X.getAsset(q));this.load.image(this.bombImgId,X.getAsset(r));if(this.isMusicOn){this.load.audio(this.explosionAudioId,[X.getAsset(s)]);this.load.audio(this.pickUpAudioId,[X.getAsset(t)]);this.load.audio(this.musicId,[X.getAsset(u)])}this.load.image(this.rockId,X.getAsset(v));this.load.image(this.leftBtnId,X.getAsset(w));var a=X.getAsset(x);var b=fn_getUserBackgroundImageURL();if(b.length>0){this.load.image(this.backgroundImgId,b)}else{this.load.image(this.backgroundImgId,a)}this.load.spritesheet(this.dudeImgId,X.getAsset(y),{frameWidth:32,frameHeight:48});this.load.image(this.platformImgId,X.getAsset(z));this.load.image(this.brickImgId,X.getAsset(A))};p.create=function(){fn_setToFullScreen(this);fn_setBackground(this,this.backgroundImgId);this.platforms=this.physics.add.staticGroup();var c=100;var d=0;if(fn_isUserBackgroundImgUsed()){c=0;d=0.1}this.platforms.create(fn_getCanvasWidth()/2,fn_getCanvasHeight()-c,this.brickImgId).setAlpha(d).setScale(2).refreshBody();this.platforms.create(-40,fn_getCanvasHeight()*0.35,this.platformImgId).setAlpha(0.5).setScale(2).refreshBody();this.platforms.create(180,fn_getCanvasHeight()*0.7,this.platformImgId).setAlpha(0.5).setScale(2).refreshBody();this.platforms.create(fn_getCanvasWidth()-120,fn_getCanvasHeight()*0.25,this.platformImgId).setAlpha(0.5).setScale(2).refreshBody();this.platforms.create(fn_getCanvasWidth()-320,fn_getCanvasHeight()*0.6,this.platformImgId).setAlpha(0.5).setScale(2).refreshBody();this.player=this.physics.add.sprite(220,150,this.dudeImgId);this.player.setInteractive({useHandCursor:true}).on(B,this.upDown);this.player.setCollideWorldBounds(true);this.player.scaleX=2;this.player.scaleY=2;this.player.setGravityY(2000);if(this.isMusicOn){this.explosionSound=this.sound.add(this.explosionAudioId);this.pickupSound=this.sound.add(this.pickUpAudioId);this.music=fn_setUpAndPlayMusic(this,this.musicId)}this.createPlayerAnimations();this.cursors=this.input.keyboard.createCursorKeys();this.spacebar=this.input.keyboard.addKey(fn_spaceKey());this.nextWord=this.add.text(0,0,C,{fontFamily:fn_getChineseFont(),fontWeight:D,fontSize:48*1.3,color:fn_getGameMatchedTextColor()});this.nextWord.setShadow(1,1,E,1,true,true);this.nextWord.setInteractive({useHandCursor:true}).on(B,function(){var a=this.liveWords[this.toMatchIndex].chinese;var b=this.liveWords[this.toMatchIndex].pinyin;fn_playWordSound(a,b)},this).on(F,function(){this.nextWord.setStyle({fill:fn_getGameVisitedTextColor()})},this).on(G,function(){this.nextWord.setStyle({fill:fn_getGameMatchedTextColor()})},this);this.liveWords=[];this.bombs=this.physics.add.group();this.setUpGameStatusLabels();this.physics.add.collider(this.player,this.platforms,this.makeJumpable);this.physics.add.collider(this.bombs,this.platforms);this.physics.add.collider(this.player,this.bombs,this.hitBomb,null,this);X.gameMaster.styleCanvas();this.setUpPlayBtnsForMobile();fn_loadGameVocabListsByUUID();this.gameBatchTimer=this.time.addEvent({delay:1000,callback:this.updateTime,callbackScope:this,loop:true})};p.setUpGameStatusLabels=function(){this.levelText=this.add.text(16,16,H,{fontSize:I,fontFamily:fn_getChineseFont(),fill:fn_getGameMatchedTextColor()});this.timerText=this.add.text(16,56,J,{fontSize:I,fontFamily:fn_getChineseFont(),fill:fn_getGameMatchedTextColor()});this.scoreText=this.add.text(16,96,K,{fontSize:I,fontFamily:fn_getChineseFont(),fill:fn_getGameMatchedTextColor()});this.titleText=this.add.text(this.sys.canvas.width,16,L,{fontSize:I,fontFamily:fn_getChineseFont(),fill:fn_getGameMatchedTextColor()});this.wordCountText=this.add.text(this.sys.canvas.width,56,M,{fontSize:N,fontFamily:fn_getChineseFont(),fill:fn_getGameMatchedTextColor()});this.creatorText=this.add.text(this.sys.canvas.width,96,O,{fontSize:N,fontFamily:fn_getChineseFont(),fill:fn_getGameMatchedTextColor()});this.pauseBtnBg=this.add.sprite(100,200,this.btnBackgroundImgId).setScale(0.5).setInteractive({useHandCursor:true}).on(B,this.pauseGame);this.pauseBtnBg.alpha=0.5;fn_centerObject(this,this.pauseBtnBg,-5);this.pauseBtnBg.x-=this.pauseBtnBg.getBounds().width/2+10;this.pauseBtn=fn_createBtn(this,P,24,this.pauseGame);this.pauseBtn.alpha=0.7;fn_nestedInCenter(this.pauseBtn,this.pauseBtnBg);this.stopBtnBg=this.add.sprite(100,200,this.btnBackgroundImgId).setScale(0.5).setInteractive({useHandCursor:true}).on(B,this.navigateToGameOverScene);this.stopBtnBg.alpha=0.5;fn_centerObject(this,this.stopBtnBg,-5);this.stopBtnBg.x+=this.stopBtnBg.getBounds().width/2+10;this.stopBtn=fn_createBtn(this,Q,24,this.navigateToGameOverScene);this.stopBtn.alpha=0.7;fn_nestedInCenter(this.stopBtn,this.stopBtnBg)}.bind(p);p.pauseGame=function(){p.scene.pause(X.getGameSceneOneId());if(this.isMusicOn){p.music.pause()}p.scene.wake(X.getGameGlassId());p.scene.moveAbove(X.getGameSceneOneId(),X.getGameGlassId())}.bind(p);p.enablePauseBtn=function(){p.pauseBtn.setText(P);fn_nestedInCenter(p.pauseBtn,p.pauseBtnBg);if(this.isMusicOn){p.music.resume()}};p.setUpPlayBtnsForMobile=function(){if(this.isMobile){var a=this.add.image(32,568,this.leftBtnId);a.setInteractive().on(R,this.leftDown).on(B,this.leftUp).on(G,this.leftUp);a.x=150;a.y=fn_getCanvasHeight()-80;a.scaleX=2.5;a.scaleY=2.5;var b=this.add.image(160,568,this.leftBtnId);b.angle=180;b.setInteractive().on(R,this.rightDown).on(B,this.rightUp).on(G,this.rightUp);b.x=450;b.y=a.y;b.scaleX=2.5;b.scaleY=2.5;var c=this.add.image(768,568,this.leftBtnId);c.angle=90;c.setInteractive().on(R,this.upDown);c.x=fn_getCanvasWidth()-150;c.y=a.y;c.scaleX=2.5;c.scaleY=2.5}}.bind(p);p.createPlayerAnimations=function(){this.anims.create({key:this.spriteLeftId,frames:this.anims.generateFrameNumbers(this.dudeImgId,{start:0,end:3}),frameRate:13,repeat:-1});this.anims.create({key:this.spriteTurnId,frames:[{key:this.dudeImgId,frame:4}],frameRate:20});this.anims.create({key:this.spriteRightId,frames:this.anims.generateFrameNumbers(this.dudeImgId,{start:5,end:8}),frameRate:13,repeat:-1})}.bind(p);p.getBombInitialX=function(){return this.player.x<fn_getCanvasWidth()/2?fn_rand(fn_getCanvasWidth()/2,fn_getCanvasWidth()):fn_rand(0,fn_getCanvasWidth()/2)}.bind(p);p.updateTime=function(){if(this.liveWords.length!=0&&this.totalTime>0){this.totalTime-=1}this.timerText.setText(J+this.totalTime)}.bind(p);p.addTimeToScore=function(){if(this.liveWords.length===0){if(this.totalTime>0){this.totalTime-=1;this.score+=1;this.timerText.setText(J+this.totalTime);this.scoreText.setText(S+this.score)}else{if(this.addTimeToScoreTimer){this.addTimeToScoreTimer.destroy()}if(this.level==100){this.gameScene1Done=true;if(this.isMusicOn){this.explosionSound.play()}p.player.anims.play(this.spriteTurnId);this.bombs.clear(true);if(this.isMusicOn){this.music.stop()}var a=this.time.delayedCall(1000,this.navigateToGameOverScene,[],this)}else{if(this.lastDataIndex<this.chineseArray.length-1){}else{this.level+=1;this.levelText.setText(T+this.level);this.lastDataIndex=-1}this.refreshWordPairs();this.totalTime=this.liveWords.length*30;if(this.totalTime<60){this.totalTime=60}if(this.gameBatchTimer){this.gameBatchTimer.paused=false}if(this.level>2){for(j=0;j<this.liveWords.length;j++){this.tweens.add({targets:this.liveWords[j],angle:fn_rand(-20,20),duration:3000,yoyo:true,loop:-1})}}var b=this.level/2;var c=parseInt(fn_getDifficultyLevel());switch(c){case 0:b=Math.floor(this.level/3);break;case 1:b=Math.floor(this.level/2);break;case 2:b=this.level;break;}for(i=0;i<b;i++){var d=this.bombs.create(this.getBombInitialX(),16,this.bombImgId);d.setBounce(1);d.setCollideWorldBounds(true);d.setVelocity(fn_rand(-200,200),20);d.allowGravity=false}}}}}.bind(p);p.makeJumpable=function(){if(this.player.body.touching.down){this.jumpable=true}}.bind(p);p.leftDown=function(){this.leftButtonDown=true}.bind(p);p.leftUp=function(){this.leftButtonDown=false}.bind(p);p.rightDown=function(){this.rightButtonDown=true}.bind(p);p.rightUp=function(){this.rightButtonDown=false}.bind(p);p.setGameVocabLists=function(a,b,c,d,e){this.chineseArray=b.split(U);this.pinyinArray=c.split(U);this.englishArray=d.split(U);this.imgURLArray=e.split(U);this.lastDataIndex=-1;this.updateListName(a);this.wordCountText.setText(V+this.chineseArray.length);this.wordCountText.x=this.sys.canvas.width-this.wordCountText.getBounds().width-20;this.refreshWordPairs();this.totalTime=this.liveWords.length*30;if(this.totalTime<60){this.totalTime=60}}.bind(p);p.updateListName=function(a){this.titleText.setText(a);this.titleText.x=this.sys.canvas.width-this.titleText.getBounds().width-16;this.creatorText.setText(O+fn_getCreator());this.creatorText.x=this.sys.canvas.width-this.creatorText.getBounds().width-16}.bind(p);p.addToList=function(a,b){for(i=0;i<b.length;i++){a.push(b[i])}};p.refreshWordPairs=function(){this.frontList=[];this.backList=[];this.liveWords=[];var a=fn_generateShuffledIndexes(L+this.chineseArray.length).split(U);var b=this.chineseArray;var c=this.pinyinArray;var d=this.englishArray;var e=this.imgURLArray;this.chineseArray=[];this.pinyinArray=[];this.englishArray=[];this.imgURLArray=[];for(var f=0;f<a.length;f++){var g=parseInt(a[f]);this.chineseArray.push(b[g]);this.pinyinArray.push(c[g]);this.englishArray.push(d[g]);this.imgURLArray.push(e[g])}var h=fn_getGameMatchType();if(h==this.currentMatchType){h=fn_getGameMatchType();this.currentMatchType=h}var l=fn_getBatchSize();if(this.chineseArray.length<l){l=this.chineseArray.length}var m=[];var n=[];var o=[];for(k=0;k<l;k++){this.lastDataIndex+=1;if(this.lastDataIndex<this.chineseArray.length){m.push(this.chineseArray[this.lastDataIndex]);n.push(this.pinyinArray[this.lastDataIndex]);o.push(this.englishArray[this.lastDataIndex])}}switch(h){case 0:p.addToList(this.frontList,m);p.addToList(this.backList,n);break;case 1:p.addToList(this.frontList,n);p.addToList(this.backList,m);break;case 2:p.addToList(this.frontList,m);p.addToList(this.backList,o);break;case 3:p.addToList(this.frontList,o);p.addToList(this.backList,m);break;case 4:p.addToList(this.frontList,n);p.addToList(this.backList,o);break;case 5:p.addToList(this.frontList,o);p.addToList(this.backList,n);break;}fn_createWordTextObjects(m,n,this.level,h,this.frontList,this.backList,this,this.liveWords);this.physics.add.collider(this.liveWords,this.platforms);this.physics.add.collider(this.liveWords,this.liveWords);this.physics.add.overlap(this.player,this.liveWords,this.collectWord,null,this);this.showPromptText()}.bind(p);p.showPromptText=function(){if(this.liveWords.length>0){this.toMatchIndex=Math.floor(Math.random()*this.liveWords.length);var a=this.liveWords[this.toMatchIndex].backText;var b=this.liveWords[this.toMatchIndex].chinese;var c=this.liveWords[this.toMatchIndex].pinyin;if(b.length<5){if(this.isMusicOn){if(fn_getGameWordAudio()){this.music.pause();fn_playWordSound(b,c);this.time.delayedCall(b.length*1000,function(){this.music.resume()},[],this)}}}this.nextWord.setText(a.text);this.nextWord.setFontFamily(a.style.fontFamily)}else{this.nextWord.setText(L)}fn_centerText(this.nextWord);this.nextWord.y=this.nextWord.getBounds().height}.bind(p);p.upDown=function(){if(this.player.body.touching.down){this.upButtonDown=true}}.bind(p);p.resetCursors=function(){this.cursors.left.isDown=false;this.cursors.right.isDown=false;this.cursors.up.isDown=false}.bind(p);p.update=function(){if(this.gameScene1Done){return}if(this.cursors.left.isDown||this.leftButtonDown){this.player.setVelocityX(-400);this.player.anims.play(this.spriteLeftId,true)}else if(this.cursors.right.isDown||this.rightButtonDown){this.player.setVelocityX(400);this.player.anims.play(this.spriteRightId,true)}else{this.player.setVelocityX(0);this.player.anims.play(this.spriteTurnId)}if((this.cursors.up.isDown||this.upButtonDown)&&(this.player.body.touching.down&&this.jumpable)){this.jumpable=false;this.player.setVelocityY(-1600);this.upButtonDown=false}};p.collectWord=function(a,b){if(this.nextWord.text.length<1){return}if(this.nextWord.text!=b.backText.text){if(this.level<=2){b.first.setColor(fn_getGameVisitedTextColor())}return}b.backText.setVisible(true);b.add(b.backText);this.nextWord.setText(L);b.getAt(0).setColor(fn_getGameMatchedTextColor());b.getAt(0).setOrigin(0.5);if(fn_hasChineseText(b.getAt(0).text)){b.getAt(0).setFontSize(48*2)}else{b.getAt(0).setFontSize(32*2)}b.getAt(1).setOrigin(0.5);b.getAt(1).setColor(fn_getGameMatchedTextColor());if(fn_hasChineseText(b.getAt(1).text)){b.getAt(1).setFontSize(48*2)}else{b.getAt(1).setFontSize(32*2)}b.getAt(1).y=b.getAt(0).getBounds().height+10;b.body.setGravityY(10);b.body.allowGravity=true;if(this.level<3){this.tweens.add({targets:b,angle:fn_rand(-120,120),duration:5000,yoyo:true,repeat:-1})}var c=this.liveWords.indexOf(b);if(c>=0){this.liveWords.splice(c,1)}this.time.delayedCall(1500,this.removeMatchedWord,[b],this);var d=fn_getGameTextColor();for(j=0;j<this.liveWords.length;j++){this.liveWords[j].first.setColor(d)}this.score+=10;this.scoreText.setText(S+this.score);if(this.isMusicOn){this.pickupSound.play()}}.bind(p);p.removeMatchedWord=function(a){a.removeAll(true);a.destroy();if(this.liveWords.length===0){if(this.gameBatchTimer){this.gameBatchTimer.paused=true}this.bombs.clear(true);this.addTimeToScoreTimer=this.time.addEvent({delay:5,callback:this.addTimeToScore,callbackScope:this,loop:true})}else{this.showPromptText()}}.bind(p);p.hitBomb=function(a,b){this.gameScene1Done=true;if(this.isMusicOn){var c={mute:false,volume:0.4,rate:1,detune:0,seek:0,loop:false,delay:0};this.explosionSound.play(c)}a.anims.play(this.spriteTurnId);b.disableBody(true,true);a.disableBody(true,true);if(this.isMusicOn){this.music.stop()}fn_createAndExplodParticles(this,b.x,b.y,this.rockId);var d=this.time.delayedCall(1000,this.navigateToGameOverScene,[],this)}.bind(p);p.navigateToGameOverScene=function(){p.scene.stop(X.getGameSceneOneId());p.scene.stop(X.getGameGlassId());p.scene.start(X.getGameOverId());if(this.isMusicOn){this.music.stop()}}.bind(p);return p}();X.gameOver=function(){var d='#000000',c='button-bg.png';var b=fn_createScene(X.getGameOverId());b.init=function(){this.backgroundImgId=fn_createId();this.btnBackgroundImgId=fn_createId()};b.preload=function(){this.load.image(this.btnBackgroundImgId,X.getAsset(c))};b.create=function(){fn_stopFullScreen(this);fn_createGradient(this,this.backgroundImgId,d,d);fn_setBackground(this,this.backgroundImgId);fn_centerObject(this,fn_createGameOverLabel(this),3);fn_centerObject(this,fn_createFinalScoreLabel(this,X.gameScene1.score),2);fn_createPlayAgainBtn(this,this.btnBackgroundImgId);if(fn_isInternetExplorer()){}else{fn_loadGameLeaderboard()}};b.update=function(){};b.setGameLeaderboard=function(a){fn_showLeaderboard(this,a,X.gameScene1.score,document)}.bind(b);return b}();X.gameMaster=function(){function b(){var a=fn_getConfig();a.scene.push(X.gameTitle);a.scene.push(X.gameHelp);a.scene.push(X.gameOptions);a.scene.push(X.gameGlass);a.scene.push(X.gameScene1);a.scene.push(X.gameOver);return a}
W.setMainGameScene(X.gameScene1);W.setGameOverScene(X.gameOver);var c={};c.game=fn_createGame(b());fn_registerDataAgent(W);c.styleCanvas=function(){fn_styleCanvas(this.game)};return c}();