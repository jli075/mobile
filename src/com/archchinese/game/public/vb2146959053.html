var M=function(){var f;var g;var h={};h.runTimeCanvasWidth=function(){return f.sys.canvas.Width};h.runTimeCanvasHeight=function(){return f.sys.canvas.height};h.setMainGameScene=function(a){f=a};h.setGameOverScene=function(a){g=a};h.setGameVocabLists=function(a,b,c,d,e){f.setGameVocabLists(a,b,c,d,e)};h.setGameLeaderboard=function(a){g.setGameLeaderboard(a)};return h}();var N=function(){var f='gameHelp',c='gameOver',e='gameScene1',d='gameTitle',g='virtualbingo';var b={};b.getGameOverId=function(){return c};b.getGameTitleId=function(){return d};b.getGameSceneOneId=function(){return e};b.getGameHelpId=function(){return f};b.getAsset=function(a){return fn_getAsset(g,a)};return b}();N.gameTitle=function(){var d='Start',c='assets/virtualbingo/background.jpg';var a=fn_createScene(N.getGameTitleId());function b(){fn_navigateTo(a,N.getGameTitleId(),N.getGameSceneOneId())}
a.init=function(){this.backgroundImgId=fn_createId()};a.preload=function(){this.load.image(this.backgroundImgId,c)};a.create=function(){N.gameMaster.styleCanvas();fn_setBackground(this,this.backgroundImgId);fn_centerObject(this,fn_createTitlePageBtn(this,d,b),1);fn_initPinyinFont(this)};a.update=function(){};return a}();N.gameHelp=function(){var i='#000000',h='Bingo help goes here.',k='Return',e='background.jpg',f='button-bg.png',j='center',g='frame.png';function c(){fn_navigateTo(d,N.getGameHelpId(),N.getGameTitleId())}
var d=fn_createScene(N.getGameHelpId());d.init=function(){this.backgroundImgId=fn_createId();this.btnBackgroundImgId=fn_createId();this.frameImgId=fn_createId()};d.preload=function(){var a=N.getAsset(e);var b=fn_getUserBackgroundImageURL();if(b.length>0){this.load.image(this.backgroundImgId,b)}else{this.load.image(this.backgroundImgId,a)}this.load.image(this.btnBackgroundImgId,N.getAsset(f));this.load.image(this.frameImgId,N.getAsset(g))};d.create=function(){N.gameMaster.styleCanvas();fn_setBackground(this,this.backgroundImgId);this.helpTextBg=this.add.sprite(100,200,this.frameImgId).setScale(1.25);fn_centerObject(this,this.helpTextBg,1.5);var a=h;this.helpText=this.add.text(400,100,a,{fontFamily:fn_getEnglishFont(),fontSize:42,color:i,align:j,wordWrap:{width:700,useAdvancedWrap:true}});fn_nestedInCenter(this.helpText,this.helpTextBg);this.returnBtnBg=this.add.sprite(100,200,this.btnBackgroundImgId).setScale(1.25).setInteractive();fn_centerObject(this,this.returnBtnBg,-4);fn_nestedInCenter(fn_createTitlePageBtn(this,k,c),this.returnBtnBg)};d.update=function(){};return d}();N.gameScene1=function(){var H='',F='#FF0000',E='BINGO',C='Next Call',I='X',G='center',B='pickup.mp3',A='pickup.ogg',L='pointerout',K='pointerover',J='pointerup',D='~';var z=fn_createScene(N.getGameSceneOneId());z.init=function(){this.backgroundImgId=fn_createId();this.btnBackgroundImgId=fn_createId();this.pickupAudioId=fn_createId()};z.getAsset=function(a){return N.getAsset(a)};z.preload=function(){this.loadMusic(this.pickupAudioId,A,B)};z.loadMusic=function(a,b,c){this.load.audio(a,[this.getAsset(b),this.getAsset(c)])}.bind(z);z.create=function(){this.pickupSound=this.sound.add(this.pickupAudioId);var a=fn_createBtn(this,C,34,function(){});fn_centerObject(this,a,-5);fn_loadGameVocabListsByUUID();this.time.delayedCall(2000,function(){fn_setToFullScreen(this)},[],this)};z.setGameVocabLists=function(a,b,c,d,e){this.chineseArray=b.split(D);this.pinyinArray=c.split(D);this.englishArray=d.split(D);this.imgURLArray=e.split(D);this.buildBingoCard()}.bind(z);z.buildBingoCard=function(){var a=fn_getCanvasWidth();var b=fn_getCanvasHeight();var c=a>b?b:a;var d=c/10;var e=d/4;var f=c/10;var g=this.add.graphics(0,0);g.clear();g.lineStyle(1,12155479,1);g.fillStyle(16776960,1);var h=c-d-f;var i=h/5;var j=(a-h)/2;var k=d;g.fillStyle(13421772,1);g.fillRect(j,k,h,h);g.fillStyle(16776960,1);g.lineStyle(20,16776960,1);g.strokeRect(j-10,k-10,h+20,h+20);g.lineStyle(1,12155479,1);g.fillRect(j+i/2,k-i/2,h-i,i/2);g.beginPath();g.moveTo(j+i/2,d);g.arc(j+i/2,d,i/2,Phaser.Math.DegToRad(0),Phaser.Math.DegToRad(180),true,false);g.closePath();g.fillPath();g.beginPath();g.moveTo(j+i/2,d);g.arc(j+h-i/2,d,i/2,Phaser.Math.DegToRad(0),Phaser.Math.DegToRad(180),true,false);g.closePath();g.fillPath();this.currentMatchType=fn_getGameMatchType();var l=fn_getPinyinFont();var m=fn_getChineseFont();var n=fn_getEnglishFont();var o=fn_getTextBackgroundColor();var p=E;var q=5;this.cellTextList=[];var r;for(var s=0;s<q;s++){var r=this.add.text(j+s*i+i/2,e+3,p.substring(s,s+1),{fontFamily:fn_getEnglishFont(),fontSize:68,color:F,align:G});r.setShadow(2,2,o,2,true,true);r.x=j+s*i+i/2-r.getBounds().width*0.5;for(var t=0;t<q;t++){g.strokeRect(j+s*i,k+t*i,i,i);var r=H;var u=s*q+t;if(u<this.chineseArray.length){r=this.chineseArray[u]}var v=20;var w=fn_createStaticBtn(this,r,m,v,fn_getGameTextColor());w.setOrigin(0.5);w.setWordWrapWidth(i,true);w.setAlign(G);w.x=0;w.y=0;var x=this.add.container(10,100,[w]);x.setSize(i,i);x.setInteractive({useHandCursor:true});x.x=j+t*i+i/2;x.y=k+s*i+i/2;var y=fn_createStaticBtn(this,I,n,150,fn_getGameMatchedTextColor());y.setOrigin(0.5);y.setWordWrapWidth(i,true);y.setAlign(G);y.x=0;y.y=0;y.setVisible(false);x.add(y);this.cellTextList.push(x)}}this.autoSizeTextTimer=this.time.addEvent({delay:100,callback:this.autoAdjustText,args:[m,68,i],callbackScope:this,loop:true})}.bind(z);z.autoAdjustText=function(a,b,c){if(this.cellTextList.length>0){var d=this.cellTextList.shift();d.on(J,function(){if(d.getAt(1).visible){d.getAt(1).setVisible(false)}else{d.getAt(1).setVisible(true);d.getAt(1).setAlpha(0.9)}z.pickupSound.play()}).on(K,function(){d.getAt(0).setColor(fn_getGameVisitedTextColor());d.getAt(1).setAlpha(0.4);d.getAt(0).setScale(1.2)}).on(L,function(){d.getAt(0).setColor(fn_getGameTextColor());d.getAt(1).setAlpha(0.9);d.getAt(0).setScale(1)});var e=fn_findMaxFontInBox(this,d.first.text,a,b,c,c);d.first.setFontSize(e);d.first.setFontFamily(a)}else{this.autoSizeTextTimer.destroy()}}.bind(z);z.update=function(){};return z}();N.gameOver=function(){var c='#000000',b='button-bg.png';var a=fn_createScene(N.getGameOverId());a.init=function(){this.backgroundImgId=fn_createId();this.btnBackgroundImgId=fn_createId()};a.preload=function(){this.load.image(this.btnBackgroundImgId,N.getAsset(b))};a.create=function(){fn_stopFullScreen(this);fn_createGradient(this,this.backgroundImgId,c,c);fn_setBackground(this,this.backgroundImgId);fn_centerObject(this,fn_createGameOverLabel(this),0);fn_createPlayAgainBtn(this,this.btnBackgroundImgId)};a.update=function(){};return a}();N.gameMaster=function(){function b(){var a=fn_getConfig();a.scene.push(N.gameTitle);a.scene.push(N.gameHelp);a.scene.push(N.gameScene1);a.scene.push(N.gameOver);a.physics.arcade.gravity.y=0;return a}
M.setMainGameScene(N.gameScene1);M.setGameOverScene(N.gameOver);var c={};c.game=fn_createGame(b());fn_registerDataAgent(M);c.styleCanvas=function(){fn_styleCanvas(this.game)};return c}();