var Z=function(){var f;var g;var h={};h.runTimeCanvasWidth=function(){return f.sys.canvas.Width};h.runTimeCanvasHeight=function(){return f.sys.canvas.height};h.setMainGameScene=function(a){f=a};h.setGameOverScene=function(a){g=a};h.setGameVocabLists=function(a,b,c,d,e){f.setGameVocabLists(a,b,c,d,e)};h.setGameLeaderboard=function(a){g.setGameLeaderboard(a)};return h}();var $=function(){var g='gameGlass',f='gameHelp',c='gameOver',e='gameScene1',d='gameTitle',h='whackamole';var b={};b.getGameOverId=function(){return c};b.getGameTitleId=function(){return d};b.getGameSceneOneId=function(){return e};b.getGameHelpId=function(){return f};b.getGameGlassId=function(){return g};b.getAsset=function(a){return fn_getAsset(h,a)};return b}();$.gameTitle=function(){var i='Help',h='Start',e='background.png',f='button-bg.png',g='pointerup';var b=fn_createScene($.getGameTitleId());function c(){b.scene.start($.getGameGlassId());b.scene.sleep($.getGameGlassId());b.scene.start($.getGameSceneOneId());b.scene.moveAbove($.getGameTitleId(),$.getGameSceneOneId());b.scene.moveAbove($.getGameGlassId(),$.getGameSceneOneId())}
function d(){b.scene.start($.getGameHelpId());b.scene.stop($.getGameTitleId())}
b.init=function(){this.backgroundImgId=fn_createId();this.btnBackgroundImgId=fn_createId()};b.preload=function(){var a=$.getAsset(e);this.load.image(this.backgroundImgId,a);this.load.image(this.btnBackgroundImgId,$.getAsset(f))};b.create=function(){$.gameMaster.styleCanvas();this.background=fn_createTileSprite(this,this.backgroundImgId);this.startBtnBg=this.add.sprite(100,200,this.btnBackgroundImgId).setScale(1.25).setInteractive({useHandCursor:true}).on(g,c);fn_centerObject(this,this.startBtnBg,1);fn_nestedInCenter(fn_createTitlePageBtn(this,h,c),this.startBtnBg);this.helpBtnBg=this.add.sprite(100,200,this.btnBackgroundImgId).setScale(1.25).setInteractive({useHandCursor:true}).on(g,d);fn_centerObject(this,this.helpBtnBg,-1);fn_nestedInCenter(fn_createTitlePageBtn(this,i,d),this.helpBtnBg);fn_initPinyinFont(this)};b.update=function(){};return b}();$.gameHelp=function(){var h='#000000',m='Return',g='Welcome to Whack-a-mole!\n\nClick the moles with the matching Chinese, English, or Pinyin before they go back into their holes. For each correct answer, you will gain 15 points, while for each incorrect answer, you will lose 2 points. Your final score is calculated by both accuracy and your in-game score. Use the mouse cursor or your finger to target the moles. As the game progresses, mole speed will increase. Click Pause button to pause the game.',d='background.png',e='button-bg.png',i='center',f='frame.png',l='pointerup';function b(){c.scene.stop($.getGameHelpId());c.scene.start($.getGameTitleId())}
var c=fn_createScene($.getGameHelpId());c.init=function(){this.backgroundImgId=fn_createId();this.btnBackgroundImgId=fn_createId();this.frameImgId=fn_createId()};c.preload=function(){var a=$.getAsset(d);this.load.image(this.backgroundImgId,a);this.load.image(this.btnBackgroundImgId,$.getAsset(e));this.load.image(this.frameImgId,$.getAsset(f))};c.create=function(){$.gameMaster.styleCanvas();this.background=fn_createTileSprite(this,this.backgroundImgId);this.helpTextBg=this.add.sprite(100,200,this.frameImgId).setScale(1.25);fn_centerObject(this,this.helpTextBg,1.5);var a=g;this.helpText=this.add.text(400,100,a,{fontFamily:fn_getEnglishFont(),fontSize:36,color:h,align:i,wordWrap:{width:700,useAdvancedWrap:true}});fn_nestedInCenter(this.helpText,this.helpTextBg);this.returnBtnBg=this.add.sprite(100,200,this.btnBackgroundImgId).setScale(1.25).setInteractive({useHandCursor:true}).on(l,b);fn_centerObject(this,this.returnBtnBg,-4);fn_nestedInCenter(fn_createTitlePageBtn(this,m,b),this.returnBtnBg)};c.update=function(){};return c}();$.gameGlass=function(){var d='Resume',e='Stop',b='button-bg.png',c='pointerup';var a=fn_createScene($.getGameGlassId());a.init=function(){this.btnBackgroundImgId=fn_createId()};a.preload=function(){this.load.image(this.btnBackgroundImgId,$.getAsset(b))};a.create=function(){this.resumeBtnBg=this.add.sprite(100,200,this.btnBackgroundImgId).setScale(0.5).setInteractive({useHandCursor:true}).on(c,this.resumeGame);this.resumeBtnBg.alpha=0.5;fn_centerObject(this,this.resumeBtnBg,-5);this.resumeBtnBg.x=this.sys.canvas.width-2*this.resumeBtnBg.getBounds().width-20+70;this.resumeBtn=fn_createBtn(this,d,24,this.resumeGame);this.resumeBtn.alpha=0.7;fn_nestedInCenter(this.resumeBtn,this.resumeBtnBg);this.stopBtnBg=this.add.sprite(100,200,this.btnBackgroundImgId).setScale(0.5).setInteractive({useHandCursor:true}).on(c,this.stopGame);this.stopBtnBg.alpha=0.5;fn_centerObject(this,this.stopBtnBg,-5);this.stopBtnBg.x=this.sys.canvas.width-this.stopBtnBg.getBounds().width-10+70;this.stopBtn=fn_createBtn(this,e,24,this.stopGame);this.stopBtn.alpha=0.7;fn_nestedInCenter(this.stopBtn,this.stopBtnBg)};a.resumeGame=function(){a.scene.sleep($.getGameGlassId());a.scene.resume($.getGameSceneOneId());a.scene.get($.getGameSceneOneId()).music.resume();a.scene.get($.getGameSceneOneId()).enablePauseBtn()}.bind(a);a.stopGame=function(){a.scene.stop($.getGameSceneOneId());a.scene.stop($.getGameGlassId());a.scene.start($.getGameOverId());a.scene.get($.getGameSceneOneId()).music.stop()}.bind(a);a.update=function(){};return a}();$.gameScene1=function(){var E='',G=' ',W='%',F='-',Y='0x00FF00',X='0xFF0000',V='Accuracy: ',M='Accuracy: 0%',O='Created By: ',P='Pause',T='Power2',U='Score: ',L='Score: 0',Q='Stop',S='Word Count: ',N='Word Count: 0',u='background.png',w='best_plant.png',H='bold',x='broad_leaf_plant.png',v='button-bg.png',z='checkmark.png',y='mole.png',A='mole_mask.png',C='pickup.mp3',K='pointerout',J='pointerover',I='pointerup',D='punch.mp3',B='squirrel.mp3',R='~';var t=fn_createScene($.getGameSceneOneId());t.init=function(){this.backgroundImgId=fn_createId();this.btnBackgroundImgId=fn_createId();this.plantImgId=fn_createId();this.broadLeafPlantImgId=fn_createId();this.moleImgId=fn_createId();this.moleMaskId=fn_createId();this.pickupAudioId=fn_createId();this.punchAudioId=fn_createId();this.checkMarkId=fn_createId();this.liveWords=[];this.moles=[];this.recentMoleIds=[];this.recentMoleTextList=[];this.batchIndex=0;this.matchedChineseList=[];this.totalChineseCount=0;this.matchedCount=0;this.finalScore=0;this.score=0;this.totalHits=0;this.accuracy=0;this.musicId=fn_createId();this.currentMatchType=-1};t.preload=function(){this.load.image(this.backgroundImgId,this.getAsset(u));this.load.image(this.btnBackgroundImgId,this.getAsset(v));this.load.image(this.plantImgId,this.getAsset(w));this.load.image(this.broadLeafPlantImgId,this.getAsset(x));this.load.image(this.moleImgId,this.getAsset(y));this.load.image(this.checkMarkId,this.getAsset(z));this.load.image(this.moleMaskId,this.getAsset(A));this.loadMusic(this.musicId,B);this.loadMusic(this.pickupAudioId,C);this.loadMusic(this.punchAudioId,D)};t.create=function(){fn_setToFullScreen(this);this.background=fn_createTileSprite(this,this.backgroundImgId);this.createMolesAndPlants();this.music=this.sound.add(this.musicId);this.time.addEvent({delay:30000+30000*Math.random(),callback:this.playMoleSound,callbackScope:this,loop:false});this.pickupSound=this.sound.add(this.pickupAudioId);this.punchSound=this.sound.add(this.punchAudioId);this.setUpGameStatusLabels();this.setUpPromptTextLabel();fn_loadGameVocabListsByUUID()};t.update=function(){};t.getAsset=function(a){return $.getAsset(a)};t.loadMusic=function(a,b){this.load.audio(a,[this.getAsset(b)])}.bind(t);t.createMole=function(a,b){var c=this.drawMoleHole(a,b,250,160,38);var d=this.add.image(a,b+180,this.moleImgId);d.uniqueId=E+a+F+b;var e=this.add.image(a,b+200,this.moleMaskId);var f=this.add.graphics();f.lineStyle(38,12155479,1);var g=fn_createEllipseCurve(a,b,125,80,0,180,false);g.draw(f,64);return d}.bind(t);t.createMolesAndPlants=function(){var a=6;var b=250;var c=Math.floor(fn_getCanvasWidth()/b);var d=Math.floor(fn_getCanvasHeight()/b);var e=[];var f=100;var g=40;for(var h=0;h<d;h++){e.push([]);for(var i=0;i<c;i++){if(h==0&&(i==0||(i==3||(i==4||i==c-1)))||h==d-1&&i==c-1){e[h].push(false);continue}var l=Math.floor(Math.random()*5);var m=Math.random();if(m<0.4){m=0.4}switch(l){case 0:if(h>1&&this.moles.length<2||h>2&&this.moles.length<5){if(h>0&&i==0||h>0&&(i>0&&(!!!e[h][i-1]&&this.moles.length<a))){var n=this.createMole(f+i*b+b/2,g+h*b+b/2);this.moles.push(n);e[h].push(true)}else{e[h].push(false)}}else{if(Math.random()>0.5){var o=this.add.image(f+i*b+Math.random()*b/2,g+h*b+Math.random()*b/2,this.broadLeafPlantImgId);o.scale=m;e[h].push(false)}else{e[h].push(false)}}break;case 1:if(h>1&&this.moles.length<2||h>2&&this.moles.length<5){if(h>0&&i==0||h>0&&(i>0&&(!!!e[h][i-1]&&this.moles.length<a))){var n=this.createMole(f+i*b+b/2,g+h*b+b/2);this.moles.push(n);e[h].push(true)}else{e[h].push(false);var p=this.add.image(f+i*b+Math.random()*b/2,g+h*b+Math.random()*b/2,this.plantImgId);p.scale=m}}else{e[h].push(false);var p=this.add.image(f+i*b+Math.random()*b/2,g+h*b+Math.random()*b/2,this.plantImgId);p.scale=m}break;case 2:if(h>1&&this.moles.length<2||h>2&&this.moles.length<5){if(h>0&&i==0||h>0&&(i>0&&(!!!e[h][i-1]&&this.moles.length<a))){var n=this.createMole(f+i*b+b/2,g+h*b+b/2);this.moles.push(n);e[h].push(true)}else{e[h].push(false);var o=this.add.image(f+i*b+Math.random()*b/2,g+h*b+Math.random()*b/2,this.broadLeafPlantImgId);o.scale=m}}else{e[h].push(false);var o=this.add.image(f+i*b+Math.random()*b/2,g+h*b+Math.random()*b/2,this.broadLeafPlantImgId);o.scale=m}break;case 3:if(h>0&&i==0||h>0&&(i>0&&(!!!e[h][i-1]&&this.moles.length<a))){var n=this.createMole(f+i*b+b/2,g+h*b+b/2);this.moles.push(n);e[h].push(true)}else{var p=this.add.image(f+i*b+Math.random()*b/2,g+h*b+Math.random()*b/2,this.plantImgId);p.scale=m;e[h].push(false)}break;case 4:if(h>0&&i==0||h>0&&(i>0&&(!!!e[h][i-1]&&this.moles.length<a))){var n=this.createMole(f+i*b+b/2,g+h*b+b/2);this.moles.push(n);e[h].push(true)}else{var o=this.add.image(f+i*b+Math.random()*b/2,g+h*b+Math.random()*b/2,this.broadLeafPlantImgId);o.scale=m;e[h].push(false)}break;}}}};t.setUpPromptTextLabel=function(){this.nextWord=this.add.text(0,0,G,{fontFamily:fn_getChineseFont(),fontWeight:H,fontSize:48*1.3,color:fn_getGameVisitedTextColor()});this.nextWord.setInteractive({useHandCursor:true}).on(I,function(){var a=this.liveWords[this.toMatchIndex].chinese;var b=this.liveWords[this.toMatchIndex].pinyin;fn_playWordSound(a,b)},this).on(J,function(){this.nextWord.setStyle({fill:fn_getGameTextColor()});this.nextWord.scale=1.2},this).on(K,function(){this.nextWord.setStyle({fill:fn_getGameVisitedTextColor()});this.nextWord.scale=1},this)}.bind(t);t.playMoleSound=function(){if(Math.random()>0.5){fn_playSound(this.music,fn_getBackgroundMusicVolume()/2,false)}}.bind(t);t.drawMoleHole=function(a,b,c,d,e){var f=this.add.graphics();f.lineStyle(e,12155479,1);f.fillStyle(0,0.8);var g=fn_createEllipse(a,b,c,d);f.fillEllipseShape(g);f.strokeEllipseShape(g,128);return g}.bind(t);t.setUpGameStatusLabels=function(){this.scoreText=fn_createStatusLabel(this,16,16,L);this.accuracyText=fn_createStatusLabel(this,16,56,M);fn_createProgressBar(this,16,96,160,30);fn_updateProgressBar(this,0);this.titleText=fn_createStatusLabel(this,this.sys.canvas.width,16,E);this.wordCountText=fn_createStatusLabel(this,this.sys.canvas.width,56,N);this.creatorText=fn_createStatusLabel(this,this.sys.canvas.width,96,O);this.pauseBtnBg=this.add.sprite(100,200,this.btnBackgroundImgId).setScale(0.5).setInteractive({useHandCursor:true}).on(I,this.pauseGame);this.pauseBtnBg.alpha=0.5;fn_centerObject(this,this.pauseBtnBg,-5);this.pauseBtnBg.x=this.sys.canvas.width-2*this.pauseBtnBg.getBounds().width-20+70;this.pauseBtn=fn_createBtn(this,P,24,this.pauseGame);this.pauseBtn.alpha=0.7;fn_nestedInCenter(this.pauseBtn,this.pauseBtnBg);this.stopBtnBg=this.add.sprite(100,200,this.btnBackgroundImgId).setScale(0.5).setInteractive({useHandCursor:true}).on(I,this.navigateToGameOverScene);this.stopBtnBg.alpha=0.5;fn_centerObject(this,this.stopBtnBg,-5);this.stopBtnBg.x=this.sys.canvas.width-this.stopBtnBg.getBounds().width-10+70;this.stopBtn=fn_createBtn(this,Q,24,this.navigateToGameOverScene);this.stopBtn.alpha=0.7;fn_nestedInCenter(this.stopBtn,this.stopBtnBg)}.bind(t);t.pauseGame=function(){t.scene.pause($.getGameSceneOneId());t.music.pause();t.scene.wake($.getGameGlassId());t.scene.moveAbove($.getGameSceneOneId(),$.getGameGlassId());this.popMoleTimer.paused=true}.bind(t);t.enablePauseBtn=function(){t.pauseBtn.setText(P);fn_nestedInCenter(t.pauseBtn,t.pauseBtnBg);this.popMoleTimer.paused=false};t.setGameVocabLists=function(a,b,c,d,e){this.chineseArray=b.split(R);this.pinyinArray=c.split(R);this.englishArray=d.split(R);this.imgURLArray=e.split(R);this.lastDataIndex=-1;this.updateListName(a);this.totalChineseCount=this.chineseArray.length;this.wordCountText.setText(S+this.chineseArray.length);this.wordCountText.x=this.sys.canvas.width-this.wordCountText.getBounds().width-20;this.refreshWithNewWords()}.bind(t);t.cleanUpMoles=function(){for(var a=0;a<this.moles.length;a++){var b=this.moles[a];if(b.container){b.container.removeAll(true);b.container.destroy();b.container=null}}}.bind(t);t.createWordContainer=function(a,b,c){var d=fn_getCanvasWidth();var e=fn_getCanvasHeight();var f=fn_getPinyinFont();var g=fn_getChineseFont();var h=fn_getEnglishFont();var i=parseInt(fn_getGameTextSize());if(i<42){i=42}var l=i;var m=g;switch(this.currentMatchType){case 0:case 2:m=g;l=i+5;break;case 1:case 4:m=f;var n=fn_processPinyin(a);a=n;break;case 3:case 5:m=h;l=i*0.75;break;}var o=t.add.text(0,0,a,{fontFamily:m,fontWeight:H,fontSize:l,color:fn_getGameTextColor()}).setOrigin(0.5);var p=t.add.container(10,100,[o]);p.setSize(o.getBounds().width,o.getBounds().height);p.setVisible(false);p.answer=b;var q=g;var r=i;switch(this.currentMatchType){case 0:case 5:q=f;b=fn_processPinyin(b);break;case 2:case 4:q=h;r=i*0.75;break;case 1:case 3:q=g;r=i+5;break;}var s=t.add.text(0,0,b,{fontFamily:q,fontWeight:H,fontSize:r,color:fn_getGameTextColor()}).setOrigin(0.5);s.setVisible(false);p.backText=s;switch(this.currentMatchType){case 0:p.chinese=a;p.pinyin=b;break;case 1:p.chinese=b;p.pinyin=a;break;case 2:p.chinese=a;p.pinyin=c;break;case 3:p.pinyin=c;p.chinese=b;break;case 4:p.pinyin=a;p.chinese=c;break;case 5:p.pinyin=b;p.chinese=c;break;}return p}.bind(t);t.shuffleChinesePinyinEnglishImgArrays=function(){var a=fn_syncShuffle([this.chineseArray,this.pinyinArray,this.englishArray,this.imgURLArray]);this.chineseArray=a[0];this.pinyinArray=a[1];this.englishArray=a[2];this.imgURLArray=a[3]}.bind(t);t.refreshWithNewWords=function(){this.cleanUpMoles();this.frontList=[];this.backList=[];this.helpList=[];this.liveWords=[];this.shuffleChinesePinyinEnglishImgArrays();var a=fn_getGameMatchType();if(a==this.currentMatchType){a=fn_getGameMatchType()}this.currentMatchType=a;var b=this.moles.length;if(this.chineseArray.length<b){b=this.chineseArray.length}var c=[];var d=[];var e=[];for(k=0;k<b;k++){this.lastDataIndex+=1;if(this.lastDataIndex<this.chineseArray.length){c.push(this.chineseArray[this.lastDataIndex]);d.push(this.pinyinArray[this.lastDataIndex]);e.push(this.englishArray[this.lastDataIndex])}}switch(this.currentMatchType){case 0:fn_copyList(this.frontList,c);fn_copyList(this.backList,d);fn_copyList(this.helpList,e);break;case 1:fn_copyList(this.frontList,d);fn_copyList(this.backList,c);fn_copyList(this.helpList,e);break;case 2:fn_copyList(this.frontList,c);fn_copyList(this.backList,e);fn_copyList(this.helpList,d);break;case 3:fn_copyList(this.frontList,e);fn_copyList(this.backList,c);fn_copyList(this.helpList,d);break;case 4:fn_copyList(this.frontList,d);fn_copyList(this.backList,e);fn_copyList(this.helpList,c);break;case 5:fn_copyList(this.frontList,e);fn_copyList(this.backList,d);fn_copyList(this.helpList,c);break;}for(var f=0;f<this.frontList.length;f++){var g=this.createWordContainer(this.frontList[f],this.backList[f],this.helpList[f]);this.moles[f].container=g;g.mole=this.moles[f];this.liveWords.push(g)}this.batchIndex+=1;this.showPromptText()}.bind(t);t.shufflFrontBackHelpLists=function(){var a=fn_generateShuffledIndexes(E+this.frontList.length).split(R);var b=this.frontList;var c=this.backList;var d=this.helpList;this.frontList=[];this.backList=[];this.helpList=[];for(var e=0;e<a.length;e++){var f=parseInt(a[e]);this.frontList.push(b[f]);this.backList.push(c[f]);this.helpList.push(d[f])}}.bind(t);t.refreshWithSamePromptAndMatchType=function(){this.shufflFrontBackHelpLists();this.cleanUpMoles();this.liveWords=[];var a=fn_generateShuffledIndexes(E+this.frontList.length).split(R);for(var b=0;b<this.frontList.length;b++){var c=this.createWordContainer(this.frontList[b],this.backList[b],this.helpList[b]);if(c.backText.text==this.nextWord.text){this.toMatchIndex=this.liveWords.length}var d=parseInt(a[b]);this.moles[d].container=c;c.mole=this.moles[d];this.liveWords.push(c)}}.bind(t);t.resetMoles=function(){for(var a=0;a<this.moles.length;a++){var b=this.moles[a];b.disableInteractive();b.clearTint();b.scaleY=1;if(b.container){b.container.setVisible(false);b.container.getAt(0).scale=0;if(b.container.initY){b.y=b.container.initY}}}}.bind(t);t.popAMole=function(){this.popMoleTimer.paused=true;if(this.liveWords.length==0){return}if(this.nextWord.text.length==0){return}if(this.timeline){this.timeline.destroy()}this.resetMoles();this.rebuildMoleContainerBinding();var a=this.pickAMole();var b=this.liveWords[a].mole;this.animateMole(b)}.bind(t);t.animateMole=function(c){this.timeline=this.tweens.timeline({ease:T,duration:this.getMolePopUpInterval()/2,tweens:[{targets:c,y:c.y-200,offset:50,yoyo:true,onStart:t.onMoleStartHandler,onStartParams:[c],onUpdate:function(a,b){b.container.x=b.x;b.container.getAt(0).scale=1.4*Math.abs(b.y-b.container.initY)/200;b.container.y=b.y-b.getBounds().height/2-b.container.getAt(0).getBounds().height/2},onComplete:t.onMoleCompleteHandler,onCompleteParams:[c]}]})}.bind(t);t.pickAMole=function(){var a=this.liveWords.length;var b=Math.floor(Math.random()*a);var c=0;for(var d=0;d<this.liveWords.length;d++){if(this.liveWords[d].backText.text==this.nextWord.text){c=d;break}}var e=Math.floor(Math.random()*3);if(e==1){b=c}else{b=Math.floor(Math.random()*a)}if(this.recentMoleTextList.length>0){f=0;while(f<10&&(a>1&&this.recentMoleTextList.indexOf(this.liveWords[b].backText.text)>=0)){b=Math.floor(Math.random()*a);f++}}var f=0;if(this.recentMoleIds.length>0){while(f<20&&(a>1&&this.recentMoleIds.indexOf(this.liveWords[b].mole.uniqueId)>=0)){b=Math.floor(Math.random()*a);f++}}this.recentMoleIds.push(this.liveWords[b].mole.uniqueId);if(this.recentMoleIds.length>3){this.recentMoleIds.shift()}this.recentMoleTextList.push(this.liveWords[b].backText.text);if(this.recentMoleTextList.length>3){this.recentMoleTextList.shift()}return b};t.rebuildMoleContainerBinding=function(){var a=fn_generateShuffledIndexes(E+this.frontList.length).split(R);var b=this.frontList;var c=this.backList;var d=this.helpList;this.frontList=[];this.backList=[];this.helpList=[];for(var e=0;e<a.length;e++){var f=parseInt(a[e]);this.frontList.push(b[f]);this.backList.push(c[f]);this.helpList.push(d[f])}this.refreshWithSamePromptAndMatchType()}.bind(t);t.getMolePopUpInterval=function(){var a=parseInt(fn_getDifficultyLevel());var b=1000;var c=0;switch(a){case 0:b=2000;c=this.batchIndex*20;break;case 1:c=this.batchIndex*30;b=1500;break;case 2:c=this.batchIndex*40;b=1000;break;}b-=c;if(b<700){b=700}return b}.bind(t);t.onMoleStartHandler=function(a,b,c){c.setInteractive({useHandCursor:true}).on(I,function(){this.hitMole(c)},this);c.container.setVisible(true);if(!!!c.container.initY){c.container.initY=c.y}c.container.getAt(0).scale=0}.bind(t);t.onMoleCompleteHandler=function(a,b,c){c.removeInteractive();c.scaleY=1;this.timeline.destroy();this.popMoleTimer.paused=false}.bind(t);t.showPromptText=function(){if(this.matchedChineseList.length==this.totalChineseCount){this.checkIfDone();return}if(this.liveWords.length>0){this.toMatchIndex=Math.floor(Math.random()*this.liveWords.length);var a=0;while(a<20&&this.matchedChineseList.indexOf(this.liveWords[this.toMatchIndex].chinese)>=0){a++;this.toMatchIndex=Math.floor(Math.random()*this.liveWords.length)}var b=this.liveWords[this.toMatchIndex].backText;var c=this.getMolePopUpInterval();this.nextWord.setText(b.text);this.nextWord.setFontFamily(b.style.fontFamily);fn_centerText(this.nextWord);this.nextWord.y=this.nextWord.getBounds().height/2;if(this.popMoleTimer){this.popMoleTimer.paused=false}else{this.popMoleTimer=this.time.addEvent({delay:c,callback:this.popAMole,callbackScope:this,loop:true})}}else{this.nextWord.setText(E)}}.bind(t);t.updateListName=function(a){this.titleText.setText(a);this.titleText.x=this.sys.canvas.width-this.titleText.getBounds().width-16;this.creatorText.setText(O+fn_getCreator());this.creatorText.x=this.sys.canvas.width-this.creatorText.getBounds().width-16}.bind(t);t.handleWordMatch=function(a){var b=a.container;b.backText.setVisible(true);b.add(b.backText);this.nextWord.setText(E);b.getAt(0).setColor(fn_getGameMatchedTextColor());b.getAt(0).setOrigin(0.5);if(fn_hasChineseText(b.getAt(0).text)){b.getAt(0).setFontSize(48*2)}else{b.getAt(0).setFontSize(32*2)}b.getAt(1).setOrigin(0.5);b.getAt(1).setColor(fn_getGameMatchedTextColor());if(fn_hasChineseText(b.getAt(1).text)){b.getAt(1).setFontSize(48*2)}else{b.getAt(1).setFontSize(32*2)}b.getAt(0).alpha=0;b.getAt(1).y=b.getAt(1).getBounds().height/2;var c=this.add.image(0,0,this.checkMarkId);b.add(c);b.getAt(2).y=b.getAt(1).y-b.getAt(1).getBounds().height/2;b.getAt(2).x=b.getAt(1).x+b.getAt(1).getBounds().width;var d=t.add.text(0,0,b.getAt(0).text,{fontFamily:b.getAt(0).style.fontFamily,fontWeight:H,fontSize:b.getAt(0).style.fontSize,color:b.getAt(0).style.color}).setOrigin(0.5);b.add(d);b.getAt(3).y=b.getAt(0).y-b.getAt(3).getBounds().height/2;b.getAt(3).x=b.getAt(0).x;this.tweens.add({targets:b,alpha:0,duration:4000,yoyo:false,repeat:0});var e=this.liveWords.indexOf(b);if(e>=0){this.liveWords.splice(e,1)}var f=b.chinese;var g=b.pinyin;var h=-1;switch(this.currentMatchType){case 0:h=this.frontList.indexOf(f);break;case 1:h=this.backList.indexOf(f);break;case 2:h=this.frontList.indexOf(f);break;case 3:h=this.backList.indexOf(f);break;case 4:h=this.frontList.indexOf(g);break;case 5:h=this.backList.indexOf(g);break;}if(h>=0){this.frontList.splice(h,1);this.backList.splice(h,1);this.helpList.splice(h,1)}this.time.delayedCall(2000,this.removeMatchedWord,[b],this);var i=fn_getGameTextColor();for(j=0;j<this.liveWords.length;j++){this.liveWords[j].first.setColor(i)}}.bind(t);t.removeMatchedWord=function(a){if(this.liveWords.length<this.moles.length){this.lastDataIndex=-1;this.refreshWithNewWords()}else{if(this.totalChineseCount<=this.moles.length){this.batchIndex+=1}this.showPromptText()}}.bind(t);t.showScore=function(){if(this.totalHits==0){this.accuracyText.setText(M);this.accuracy=0}else{this.accuracy=Math.floor(100*this.matchedCount/this.totalHits)}if(this.score<0){this.score=0}this.scoreText.setText(U+this.score);this.accuracyText.setText(V+this.accuracy+W);if(this.totalChineseCount>0){var a=this.matchedChineseList.length/this.totalChineseCount;fn_updateProgressBar(this,a);this.checkIfDone()}}.bind(t);t.checkIfDone=function(){if(this.matchedChineseList.length==this.totalChineseCount){this.time.delayedCall(1000,this.navigateToGameOverScene,[],this)}}.bind(t);t.hitMole=function(a){if(a.container&&a.container.getAt(0).scale<0.5){return}a.removeInteractive();this.totalHits+=1;if(this.nextWord.text.length>0){if(this.nextWord.text!=a.container.backText.text){fn_playSound(this.punchSound,fn_getBackgroundMusicVolume(),false);this.score-=1;a.setTint(X);a.scaleY=0.9;a.container.first.setColor(fn_getGameVisitedTextColor());this.showScore()}else{a.setTint(Y);fn_playSound(this.pickupSound,fn_getBackgroundMusicVolume(),false);this.matchedCount+=1;this.score+=15;this.handleWordMatch(a);if(this.matchedChineseList.indexOf(a.container.chinese)<0){this.matchedChineseList.push(a.container.chinese)}var b=fn_getGameTextColor();for(j=0;j<this.liveWords.length;j++){this.liveWords[j].first.setColor(b)}this.showScore()}}}.bind(t);t.navigateToGameOverScene=function(){this.popMoleTimer.remove();this.finalScore=Math.ceil(this.score*0.8+this.score*0.2*this.accuracy/100);t.scene.stop($.getGameSceneOneId());t.scene.stop($.getGameGlassId());t.scene.start($.getGameOverId());t.scene.get($.getGameSceneOneId()).music.stop()}.bind(t);return t}();$.gameOver=function(){var d='#000000',c='button-bg.png';var b=fn_createScene($.getGameOverId());b.init=function(){this.backgroundImgId=fn_createId();this.btnBackgroundImgId=fn_createId()};b.preload=function(){this.load.image(this.btnBackgroundImgId,$.getAsset(c))};b.create=function(){fn_stopFullScreen(this);fn_createGradient(this,this.backgroundImgId,d,d);fn_setBackground(this,this.backgroundImgId);fn_centerObject(this,fn_createGameOverLabel(this),3);fn_centerObject(this,fn_createFinalScoreLabel(this,$.gameScene1.finalScore),2);fn_createPlayAgainBtn(this,this.btnBackgroundImgId);if(fn_isInternetExplorer()){}else{fn_loadGameLeaderboard()}};b.update=function(){};b.setGameLeaderboard=function(a){fn_showLeaderboard(this,a,$.gameScene1.finalScore,document)}.bind(b);return b}();$.gameMaster=function(){function b(){var a=fn_getConfig();a.scene.push($.gameTitle);a.scene.push($.gameHelp);a.scene.push($.gameGlass);a.scene.push($.gameScene1);a.scene.push($.gameOver);a.physics.arcade.gravity.y=0;return a}
Z.setMainGameScene($.gameScene1);Z.setGameOverScene($.gameOver);var c={};c.game=fn_createGame(b());fn_registerDataAgent(Z);c.styleCanvas=function(){fn_styleCanvas(this.game)};return c}();